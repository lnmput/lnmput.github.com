<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico">
  <link rel="mask-icon" href="/favicon.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"swoole.app","root":"/","images":"/images","scheme":"Muse","version":"8.7.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"بحث...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>
<meta name="description" content="一个专注记录外贸网站开发技术栈的个人博客">
<meta property="og:type" content="website">
<meta property="og:title" content="杨子鳄鱼 ● 外贸自建站">
<meta property="og:url" content="https://swoole.app/page/32/index.html">
<meta property="og:site_name" content="杨子鳄鱼 ● 外贸自建站">
<meta property="og:description" content="一个专注记录外贸网站开发技术栈的个人博客">
<meta property="og:locale">
<meta property="article:author" content="lnmput@gmail.com">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://swoole.app/page/32/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-Hans","comments":"","permalink":"","path":"page/32/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>杨子鳄鱼 ● 外贸自建站</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="تشغيل شريط التصفح" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">杨子鳄鱼 ● 外贸自建站</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">十年外贸建站经验，专注外贸独立站建设，欢迎咨询</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section">Home</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags" rel="section">الوسوم</a></li>
        <li class="menu-item menu-item-read"><a href="/read" rel="section">read</a></li>
        <li class="menu-item menu-item-translate"><a href="/tags/translate" rel="section">translate</a></li>
        <li class="menu-item menu-item-about"><a href="/about" rel="section">معلومات</a></li>
        <li class="menu-item menu-item-site"><a href="/site" rel="section">site</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          المحتويات
        </li>
        <li class="sidebar-nav-overview">
          عام
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">lnmput@gmail.com</p>
  <div class="site-description" itemprop="description">一个专注记录外贸网站开发技术栈的个人博客</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">373</span>
          <span class="site-state-item-name">المقالات</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">146</span>
        <span class="site-state-item-name">الوسوم</span>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://swoole.app/2017/01/24/MYSQL%E9%9D%99%E6%80%81%E8%A1%A8-%E5%8A%A8%E6%80%81%E8%A1%A8-%E5%8E%8B%E7%BC%A9%E8%A1%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lnmput@gmail.com">
      <meta itemprop="description" content="一个专注记录外贸网站开发技术栈的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨子鳄鱼 ● 外贸自建站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/01/24/MYSQL%E9%9D%99%E6%80%81%E8%A1%A8-%E5%8A%A8%E6%80%81%E8%A1%A8-%E5%8E%8B%E7%BC%A9%E8%A1%A8/" class="post-title-link" itemprop="url">MYSQL静态表-动态表-压缩表</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">نُشر في</span>

      <time title="أُنشأ: 2017-01-24 15:26:52" itemprop="dateCreated datePublished" datetime="2017-01-24T15:26:52+09:00">2017-01-24</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">عُدل في</span>
        <time title="عُدل: 2018-03-27 22:34:24" itemprop="dateModified" datetime="2018-03-27T22:34:24+09:00">2018-03-27</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote class="blockquote-center">
我是主角，我不能死。
</blockquote>
mysql在创建表的时候定义表的性质（也叫表的类型），共有三种：静态表，动态表，压缩表。默认是静态表，如果存在varchar、blob、text字段，表类型就是动态了。

<h3 id="静态表"><a href="#静态表" class="headerlink" title="静态表"></a>静态表</h3><p>字段有固定长度，例如：char(20)。如果使用gbk字符集存储中文username，将占用40byte，如果username的实际内容没有达到 40byte，将会填充空格，以达到40byte。速度很快，因为mysql知道username总是从第41个字节开始，容易缓存，出现问题后也容易恢 复（mysql知道记录的确切位置），需要更多的硬盘空间（如果有三个上面的字段，一条记录就会占120字节，即使实际只用了其中一部分）</p>
<h3 id="动态表"><a href="#动态表" class="headerlink" title="动态表"></a>动态表</h3><p>字 段不定长（变长），这种表格式比较节省空间，但是复杂度更高，每条记录都有一个header，作用就是表明该记录有多长，所有的字符串列都是动态的（除非 小于4个字节，这种情况下，节省的空间可以忽略不计，增加的复杂度会反而会导致性能丢失），通常占用比静态表少的多地空间，但是必须经常维护（避免碎 片），例如：更新了用户名somebody为somebodyt，t不能立刻就出现在y的后面，因为空间被其他记录占用，对于出现碎片的列，每个新连接会 损失6个字节。而且出现问题后不容易重建（前面我说的静态表正好相反），如果碎片严重，有可能出现库爆炸（^_^）.</p>
<p>不包括连接的动态记录的空间消耗可以用下面的公式计算：<br>3+(列数+7)/8+（字符列数）+数字列的打包尺寸+字符串长度+（空列的数量+7）/8</p>
<p>每条记录的header可以表明那个字符串列是空的，那个数字列包含0（非空），在那种情况下不向磁盘存储，非空字符串包含一个长度字节加上字符串内容。</p>
<h3 id="压缩表"><a href="#压缩表" class="headerlink" title="压缩表"></a>压缩表</h3><p>只读，使用很少的空间，用myisampack工具创建，表要少得多，每条记录分开压缩，所以不能同时访问，可以压缩静态表和动态表。<br>创建方法：myisampack [options] filename</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://swoole.app/2017/01/23/%E5%AE%89%E8%A3%85phpRedisAdmin/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lnmput@gmail.com">
      <meta itemprop="description" content="一个专注记录外贸网站开发技术栈的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨子鳄鱼 ● 外贸自建站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/01/23/%E5%AE%89%E8%A3%85phpRedisAdmin/" class="post-title-link" itemprop="url">安装phpRedisAdmin</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">نُشر في</span>

      <time title="أُنشأ: 2017-01-23 15:43:56" itemprop="dateCreated datePublished" datetime="2017-01-23T15:43:56+09:00">2017-01-23</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">عُدل في</span>
        <time title="عُدل: 2018-03-27 22:04:06" itemprop="dateModified" datetime="2018-03-27T22:04:06+09:00">2018-03-27</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote class="blockquote-center">
你不能把这个世界，让给你所鄙视的人。
</blockquote>
### 安装步骤
- 下载https://github.com/ErikDubbelboer/phpRedisAdmin
- 解压到您的web目录下
- 在该目录下运行命令composer install

<h3 id="推荐软件"><a href="#推荐软件" class="headerlink" title="推荐软件"></a>推荐软件</h3><ul>
<li>keylord-windows(收费)</li>
</ul>
<h3 id="redis服务-windows"><a href="#redis服务-windows" class="headerlink" title="redis服务(windows)"></a>redis服务(windows)</h3><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/rgl/redis/downloads">https://github.com/rgl/redis/downloads</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://swoole.app/2017/01/10/Laravel%E4%BD%BF%E7%94%A8redis%E5%AD%98%E5%82%A8session/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lnmput@gmail.com">
      <meta itemprop="description" content="一个专注记录外贸网站开发技术栈的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨子鳄鱼 ● 外贸自建站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/01/10/Laravel%E4%BD%BF%E7%94%A8redis%E5%AD%98%E5%82%A8session/" class="post-title-link" itemprop="url">Laravel使用redis存储session</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">نُشر في</span>

      <time title="أُنشأ: 2017-01-10 12:09:36" itemprop="dateCreated datePublished" datetime="2017-01-10T12:09:36+09:00">2017-01-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">عُدل في</span>
        <time title="عُدل: 2018-03-27 22:18:18" itemprop="dateModified" datetime="2018-03-27T22:18:18+09:00">2018-03-27</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote class="blockquote-center">
水来我在漩涡中等你
火来我在灰烬中等你
</blockquote>
默认情况下，Redis 服务会提供 16 个数据库，Laravel 使用数据库 0 作为缓存和 Session 的存储。
在使用的过程中觉得这个默认的设置挺不合理，因为当你在执行命令`php artisan cache:clear` 的时候，会把 Session 也连带清除了，导致所有用户需要重新登录。

<h3 id="配置-Session-Redis-数据库"><a href="#配置-Session-Redis-数据库" class="headerlink" title="配置 Session Redis 数据库"></a>配置 Session Redis 数据库</h3><p>修改 config/database.php，在 redis 选项内增加 session 选项，并把 database 修改为 1：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;redis&#x27;</span> =&gt; [</span><br><span class="line"></span><br><span class="line">   <span class="string">&#x27;cluster&#x27;</span> =&gt; <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">   <span class="string">&#x27;default&#x27;</span> =&gt; [</span><br><span class="line">       <span class="string">&#x27;host&#x27;</span>     =&gt; env(<span class="string">&#x27;REDIS_HOST&#x27;</span>, <span class="string">&#x27;localhost&#x27;</span>),</span><br><span class="line">       <span class="string">&#x27;password&#x27;</span> =&gt; env(<span class="string">&#x27;REDIS_PASSWORD&#x27;</span>, <span class="literal">null</span>),</span><br><span class="line">       <span class="string">&#x27;port&#x27;</span>     =&gt; env(<span class="string">&#x27;REDIS_PORT&#x27;</span>, <span class="number">6379</span>),</span><br><span class="line">       <span class="string">&#x27;database&#x27;</span> =&gt; <span class="number">0</span>,</span><br><span class="line">   ],</span><br><span class="line"></span><br><span class="line">   <span class="string">&#x27;session&#x27;</span> =&gt; [</span><br><span class="line">         <span class="string">&#x27;host&#x27;</span>     =&gt; env(<span class="string">&#x27;REDIS_HOST&#x27;</span>, <span class="string">&#x27;localhost&#x27;</span>),</span><br><span class="line">         <span class="string">&#x27;password&#x27;</span> =&gt; env(<span class="string">&#x27;REDIS_PASSWORD&#x27;</span>, <span class="literal">null</span>),</span><br><span class="line">         <span class="string">&#x27;port&#x27;</span>     =&gt; env(<span class="string">&#x27;REDIS_PORT&#x27;</span>, <span class="number">6379</span>),</span><br><span class="line">         <span class="string">&#x27;database&#x27;</span> =&gt; <span class="number">1</span>,</span><br><span class="line">   ],</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<h3 id="指定-Session-使用数据库"><a href="#指定-Session-使用数据库" class="headerlink" title="指定 Session 使用数据库"></a>指定 Session 使用数据库</h3><p>修改 config/session.php</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;connection&#x27;</span> =&gt; <span class="string">&#x27;session&#x27;</span>,</span><br></pre></td></tr></table></figure>

<h3 id="开始使用"><a href="#开始使用" class="headerlink" title="开始使用"></a>开始使用</h3><p>修改 .env 文件的 SESSION_DRIVER 选项为 redis，开始应用上。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SESSION_DRIVER=redis</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://swoole.app/2017/01/10/%E4%BD%BF%E7%94%A8redis%E8%AE%B0%E5%BD%95%E4%BA%A7%E5%93%81%E7%9A%84%E6%AF%8F%E6%97%A5%E6%B5%8F%E8%A7%88%E9%87%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lnmput@gmail.com">
      <meta itemprop="description" content="一个专注记录外贸网站开发技术栈的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨子鳄鱼 ● 外贸自建站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/01/10/%E4%BD%BF%E7%94%A8redis%E8%AE%B0%E5%BD%95%E4%BA%A7%E5%93%81%E7%9A%84%E6%AF%8F%E6%97%A5%E6%B5%8F%E8%A7%88%E9%87%8F/" class="post-title-link" itemprop="url">使用redis记录产品的每日浏览量</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">نُشر في</span>

      <time title="أُنشأ: 2017-01-10 12:05:44" itemprop="dateCreated datePublished" datetime="2017-01-10T12:05:44+09:00">2017-01-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">عُدل في</span>
        <time title="عُدل: 2018-03-27 22:36:48" itemprop="dateModified" datetime="2018-03-27T22:36:48+09:00">2018-03-27</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote class="blockquote-center">
全体听令，除我之外~冲锋！
</blockquote>
### 配置文件database.php
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;redis&#x27;</span> =&gt; [</span><br><span class="line"></span><br><span class="line">       <span class="string">&#x27;cluster&#x27;</span> =&gt; <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">       <span class="string">&#x27;default&#x27;</span> =&gt; [</span><br><span class="line">           <span class="string">&#x27;host&#x27;</span>     =&gt; env(<span class="string">&#x27;REDIS_HOST&#x27;</span>, <span class="string">&#x27;localhost&#x27;</span>),</span><br><span class="line">           <span class="string">&#x27;password&#x27;</span> =&gt; env(<span class="string">&#x27;REDIS_PASSWORD&#x27;</span>, <span class="literal">null</span>),</span><br><span class="line">           <span class="string">&#x27;port&#x27;</span>     =&gt; env(<span class="string">&#x27;REDIS_PORT&#x27;</span>, <span class="number">6379</span>),</span><br><span class="line">           <span class="string">&#x27;database&#x27;</span> =&gt; <span class="number">0</span>,</span><br><span class="line">       ],</span><br><span class="line"></span><br><span class="line">       <span class="string">&#x27;product&#x27;</span> =&gt; [</span><br><span class="line">           <span class="string">&#x27;host&#x27;</span>     =&gt; <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">           <span class="string">&#x27;password&#x27;</span> =&gt;  <span class="literal">null</span>,</span><br><span class="line">           <span class="string">&#x27;port&#x27;</span>     =&gt;  <span class="number">6379</span>,</span><br><span class="line">           <span class="string">&#x27;database&#x27;</span> =&gt; <span class="number">1</span>,</span><br><span class="line">       ]</span><br><span class="line">   ],</span><br></pre></td></tr></table></figure>

<h3 id="连接存储"><a href="#连接存储" class="headerlink" title="连接存储"></a>连接存储</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 连接</span></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">connectDatabase</span>(<span class="params"><span class="variable">$name</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="keyword">return</span> Redis::connection(<span class="variable">$name</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 存储</span></span><br><span class="line"><span class="variable">$redisConnection</span> = <span class="built_in">parent</span>::getRedisConnectName();</span><br><span class="line"><span class="variable">$redis</span> = RedisHelper::connectDatabase(<span class="variable">$redisConnection</span>[<span class="string">&#x27;store&#x27;</span>]);</span><br><span class="line"><span class="variable">$redis</span>-&gt;rpush(<span class="string">&#x27;productView&#x27;</span>, <span class="variable">$product_id</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 取出</span></span><br><span class="line"><span class="variable">$products</span> = array_count_values(<span class="variable">$redis</span>-&gt;lrange(<span class="string">&#x27;productView&#x27;</span>,<span class="number">0</span>,-<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除</span></span><br><span class="line"><span class="variable">$redis</span>-&gt;del(<span class="string">&#x27;productView&#x27;</span>);</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://swoole.app/2016/12/30/linux%E7%9A%84%E8%BE%93%E5%87%BA%E5%AE%9A%E5%90%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lnmput@gmail.com">
      <meta itemprop="description" content="一个专注记录外贸网站开发技术栈的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨子鳄鱼 ● 外贸自建站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/12/30/linux%E7%9A%84%E8%BE%93%E5%87%BA%E5%AE%9A%E5%90%91/" class="post-title-link" itemprop="url">linux的输出定向</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">نُشر في</span>

      <time title="أُنشأ: 2016-12-30 13:37:17" itemprop="dateCreated datePublished" datetime="2016-12-30T13:37:17+09:00">2016-12-30</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">عُدل في</span>
        <time title="عُدل: 2018-04-25 10:32:45" itemprop="dateModified" datetime="2018-04-25T10:32:45+09:00">2018-04-25</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote class="blockquote-center">
你懂的越多，懂你的越少。
</blockquote>
最近Laravel文档里的一句配置引起了我的兴趣
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* * * * * php /path/to/artisan schedule:run &gt;&gt; /dev/<span class="literal">null</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br></pre></td></tr></table></figure>
她是什么意思呢？


<p>shell中可能经常能看到：</p>
<p>1：&gt; 代表重定向到哪里，例如：echo “123″ &gt; /home/123.txt</p>
<p>2：/dev/null 代表空设备文件</p>
<p>3：2&gt; 表示stderr标准错误</p>
<p>4：&amp; 表示等同于的意思，2&gt;&amp;1，表示2的输出重定向等同于1</p>
<p>5：1 表示stdout标准输出，系统默认值是1，所以”&gt;/dev/null”等同于 “1&gt;/dev/null”</p>
<p>分解这个组合：“&gt;/dev/null 2&gt;&amp;1” 为五部分。</p>
<p>因此，&gt;/dev/null 2&gt;&amp;1也可以写成“1&gt; /dev/null 2&gt; &amp;1”</p>
<p>那么本文标题的语句执行过程为：</p>
<p>1&gt;/dev/null ：首先表示标准输出重定向到空设备文件，也就是不输出任何信息到终端，说白了就是不显示任何信息。</p>
<p>2&gt;&amp;1 ：接着，标准错误输出重定向 到 标准输出，因为之前标准输出已经重定向到了空设备文件，所以标准错误输出也重定向到空设备文件。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://swoole.app/2016/12/28/php-cli%E7%9A%84%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lnmput@gmail.com">
      <meta itemprop="description" content="一个专注记录外贸网站开发技术栈的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨子鳄鱼 ● 外贸自建站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/12/28/php-cli%E7%9A%84%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">php-cli的使用</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">نُشر في</span>

      <time title="أُنشأ: 2016-12-28 09:22:49" itemprop="dateCreated datePublished" datetime="2016-12-28T09:22:49+09:00">2016-12-28</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">عُدل في</span>
        <time title="عُدل: 2018-03-27 22:29:29" itemprop="dateModified" datetime="2018-03-27T22:29:29+09:00">2018-03-27</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote class="blockquote-center">
关山难越，谁悲失路之人？
萍水相逢，尽是他乡之客。
</blockquote>
HP作为一门web开发语言，通常情况下我们都是在Web Server中运行PHP，使用浏览器访问，因此很少关注其命令行操作以及相关参数的使用，但是，特别是在类Unix操作系统上，PHP可以作为一门脚本语言执行与shell类似的处理任务。
> 运行时间：php-cli默认运行时间是无穷，而网页php默认设置是30s。

<h3 id="常用操作"><a href="#常用操作" class="headerlink" title="常用操作"></a>常用操作</h3><ul>
<li><p>运行指定php文件</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">php my_script.php</span><br><span class="line"> </span><br><span class="line">php -f  <span class="string">&quot;my_script.php&quot;</span></span><br></pre></td></tr></table></figure></li>
<li><p>运行php代码</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">php -r <span class="string">&quot;print_r(get_defined_constants());&quot;</span></span><br><span class="line"><span class="comment">// laravel安装时的一条命令</span></span><br><span class="line">php -r <span class="string">&quot;file_exists(&#x27;.env&#x27;) || copy(&#x27;.env.example&#x27;, &#x27;.env&#x27;);&quot;</span></span><br></pre></td></tr></table></figure></li>
<li><p>语法检查</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php -l index.php</span><br></pre></td></tr></table></figure></li>
<li><p>查看版本信息</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php -v</span><br></pre></td></tr></table></figure></li>
<li><p>显示配置文件</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php --ini</span><br></pre></td></tr></table></figure></li>
<li><p>接收参数</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;命令行参数个数: &#x27;</span> . <span class="variable">$argc</span> . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;命令行参数:\n&quot;</span>;</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$argv</span> <span class="keyword">as</span> <span class="variable">$index</span> =&gt; <span class="variable">$arg</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;    <span class="subst">&#123;$index&#125;</span> : <span class="subst">&#123;$arg&#125;</span>\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 执行命令</span></span><br><span class="line">php console.php hello world</span><br></pre></td></tr></table></figure></li>
<li><p>开启服务器</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在指定目录下运行该命令，通过url访问http://localhost:8000/hello.php</span></span><br><span class="line">php -S localhost:<span class="number">8000</span></span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://swoole.app/2016/12/26/%E6%83%8A%E8%89%B3%E7%9A%84vuejs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lnmput@gmail.com">
      <meta itemprop="description" content="一个专注记录外贸网站开发技术栈的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨子鳄鱼 ● 外贸自建站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/12/26/%E6%83%8A%E8%89%B3%E7%9A%84vuejs/" class="post-title-link" itemprop="url">惊艳的vuejs</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">نُشر في</span>

      <time title="أُنشأ: 2016-12-26 18:10:54" itemprop="dateCreated datePublished" datetime="2016-12-26T18:10:54+09:00">2016-12-26</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">عُدل في</span>
        <time title="عُدل: 2018-03-27 22:05:18" itemprop="dateModified" datetime="2018-03-27T22:05:18+09:00">2018-03-27</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote class="blockquote-center">
“大圣，此去欲何？” 
“踏南天，碎凌霄。” 
“若一去不回……” 
“便一去不回！”
</blockquote>
### 双向数据绑定
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">id</span>=<span class="string">&quot;one&quot;</span> <span class="attr">value</span>=<span class="string">&quot;face&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;className&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">id</span>=<span class="string">&quot;two&quot;</span> <span class="attr">value</span>=<span class="string">&quot;msg&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;className&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;&#123;&#123; className&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; textValue &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> dataList = &#123;</span><br><span class="line">		<span class="attr">className</span> : <span class="string">&#x27;app&#x27;</span>,</span><br><span class="line">		<span class="attr">textValue</span> : <span class="string">&#x27;你好&#x27;</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">new</span> Vue(&#123;</span><br><span class="line">		<span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">		<span class="attr">data</span>: dataList</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;&#123;&#123; className &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">	        a = &#123;&#123;a&#125;&#125;</span><br><span class="line">	        b = &#123;&#123;b&#125;&#125;</span><br><span class="line">	    <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> dataList = &#123;</span><br><span class="line">		<span class="attr">className</span> : <span class="string">&#x27;app&#x27;</span>,</span><br><span class="line">		<span class="attr">textValue</span> : <span class="string">&#x27;&lt;i&gt;你好&lt;/i&gt;&#x27;</span>,</span><br><span class="line">		<span class="attr">a</span>: <span class="number">1</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">		<span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">		<span class="attr">data</span>: dataList,</span><br><span class="line">		<span class="attr">computed</span>: &#123; <span class="attr">b</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">this</span>.a + <span class="number">1</span>;</span><br><span class="line">	    &#125;&#125;</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	vm.a = <span class="number">4</span>;</span><br><span class="line">	&#125;, <span class="number">5000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="绑定class"><a href="#绑定class" class="headerlink" title="绑定class"></a>绑定class</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;&#123;&#123; className &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;com&quot;</span> <span class="attr">v-bind:class</span>=<span class="string">&quot;&#123;&#x27;app&#x27;: a, &#x27;msg&#x27;:b&#125;&quot;</span>&gt;</span></span><br><span class="line">		&#123;&#123; fullName &#125;&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> dataList = &#123;</span><br><span class="line">		<span class="attr">a</span> : <span class="literal">true</span>,</span><br><span class="line">		<span class="attr">b</span> : <span class="literal">false</span>,</span><br><span class="line">		<span class="attr">fullName</span>: <span class="string">&#x27;yangguoqi&#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">		<span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">		<span class="attr">data</span>: dataList,</span><br><span class="line">	&#125;);</span><br><span class="line">	<span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">		vm.a = <span class="literal">false</span>;</span><br><span class="line">		vm.b = <span class="literal">true</span>;</span><br><span class="line">	&#125;,<span class="number">5000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://swoole.app/2016/12/20/%E8%B7%A8%E5%9F%9F%E8%B5%84%E6%BA%90%E5%85%B1%E4%BA%ABCORS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lnmput@gmail.com">
      <meta itemprop="description" content="一个专注记录外贸网站开发技术栈的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨子鳄鱼 ● 外贸自建站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/12/20/%E8%B7%A8%E5%9F%9F%E8%B5%84%E6%BA%90%E5%85%B1%E4%BA%ABCORS/" class="post-title-link" itemprop="url">跨域资源共享CORS</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">نُشر في</span>

      <time title="أُنشأ: 2016-12-20 14:08:08" itemprop="dateCreated datePublished" datetime="2016-12-20T14:08:08+09:00">2016-12-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">عُدل في</span>
        <time title="عُدل: 2018-04-08 22:45:01" itemprop="dateModified" datetime="2018-04-08T22:45:01+09:00">2018-04-08</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote class="blockquote-center">
我想，最好的感情是两个人都用力的活，一起体验人生的种种趣味，也能包容与鼓励对方。当对方为你打开新的世界，你就没有因为喜欢一个人而拒绝了整个世界。
</blockquote>

<p>CORS是一个W3C标准，全称是”跨域资源共享”（Cross-origin resource sharing）。<br>它允许浏览器向跨源服务器，发出XMLHttpRequest请求，从而克服了AJAX只能同源使用的限制。<br>CORS需要浏览器和服务器同时支持。目前，所有浏览器都支持该功能，IE浏览器不能低于IE10。<br>整个CORS通信过程，都是浏览器自动完成，不需要用户参与。对于开发者来说，CORS通信与同源的AJAX通信没有差别，代码完全一样。浏览器一旦发现AJAX请求跨源，就会自动添加一些附加的头信息，有时还会多出一次附加的请求，但用户不会有感觉。<br>因此，实现CORS通信的关键是服务器。只要服务器实现了CORS接口，就可以跨源通信。</p>
<h3 id="两种请求"><a href="#两种请求" class="headerlink" title="两种请求"></a>两种请求</h3><p>浏览器将CORS请求分成两类：简单请求（simple request）和非简单请求（not-so-simple request）。<br>只要同时满足以下两大条件，就属于简单请求。<br>1.请求方法是以下三种方法之一：</p>
<ul>
<li>HEAD</li>
<li>GET</li>
<li>POST</li>
</ul>
<p>2.HTTP的头信息不超出以下几种字段：</p>
<ul>
<li>Accept</li>
<li>Accept-Language</li>
<li>Content-Language</li>
<li>Last-Event-ID<br>Content-Type：只限于三个值application/x-www-form-urlencoded、multipart/form-data、text/plain<br>凡是不同时满足上面两个条件，就属于非简单请求。<br>浏览器对这两种请求的处理，是不一样的。</li>
</ul>
<h3 id="预检请求"><a href="#预检请求" class="headerlink" title="预检请求"></a>预检请求</h3><p>非简单请求是那种对服务器有特殊要求的请求，比如请求方法是PUT或DELETE，或者Content-Type字段的类型是application/json。<br>非简单请求的CORS请求，会在正式通信之前，增加一次HTTP查询请求，称为”预检”请求（preflight）。<br>浏览器先询问服务器，当前网页所在的域名是否在服务器的许可名单之中，以及可以使用哪些HTTP动词和头信息字段。只有得到肯定答复，浏览器才会发出正式的XMLHttpRequest请求，否则就报错。</p>
<p>“预检”请求用的请求方法是<code>OPTIONS</code>，表示这个请求是用来询问的。头信息里面，关键字段是Origin，表示请求来自哪个源。<br>为防止浏览器预检发出 options 请求 时出现 404 错误， 我们可以直接将 options请求结束掉；<br>以下是ThinkPHP 5利用行为特性解决跨域问题；</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">app</span>\<span class="title">api</span>\<span class="title">behavior</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CORS</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">appInit</span>(<span class="params">&amp;<span class="variable">$params</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        header(<span class="string">&#x27;Access-Control-Allow-Origin: *&#x27;</span>);</span><br><span class="line">        header(<span class="string">&quot;Access-Control-Allow-Headers: token,Origin, X-Requested-With, Content-Type, Accept&quot;</span>);</span><br><span class="line">        header(<span class="string">&#x27;Access-Control-Allow-Methods: POST,GET&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span>(request()-&gt;isOptions())&#123;</span><br><span class="line">            <span class="keyword">exit</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="一个例子"><a href="#一个例子" class="headerlink" title="一个例子"></a>一个例子</h3><p>jquery 请求</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        <span class="attr">type</span>:<span class="string">&quot;POST&quot;</span>,</span><br><span class="line">        <span class="attr">url</span>:<span class="string">&quot;http://www.shop.dev/onValidateEmail&quot;</span>,</span><br><span class="line">        <span class="attr">data</span>:&#123;<span class="attr">email</span>:<span class="string">&quot;yangguoqi@olmailorg&quot;</span>&#125;,</span><br><span class="line">        <span class="attr">datatype</span>: <span class="string">&quot;json&quot;</span>,</span><br><span class="line">        <span class="attr">success</span>:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(data);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">error</span>: <span class="function"><span class="keyword">function</span>(<span class="params">msg</span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>服务端响应</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Route::post(<span class="string">&#x27;/onValidateEmail&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    header(<span class="string">&quot;Access-Control-Allow-Origin: *&quot;</span>);</span><br><span class="line">    header(<span class="string">&quot;Access-Control-Allow-Methods: *&quot;</span>);</span><br><span class="line">    header(<span class="string">&quot;Content-Type: application/json&quot;</span>);</span><br><span class="line">    <span class="variable">$email</span> = post(<span class="string">&#x27;email&#x27;</span>,<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="variable">$count</span> = \October\Rain\Auth\Models\User::where(<span class="string">&#x27;email&#x27;</span>,<span class="variable">$email</span>)-&gt;count();</span><br><span class="line">    <span class="keyword">return</span> Response::json([</span><br><span class="line">        <span class="string">&#x27;status&#x27;</span> =&gt; <span class="number">200</span>,</span><br><span class="line">        <span class="string">&#x27;data&#x27;</span> =&gt; <span class="variable">$count</span></span><br><span class="line">    ]);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="与JSONP的比较"><a href="#与JSONP的比较" class="headerlink" title="与JSONP的比较"></a>与JSONP的比较</h3><p>CORS与JSONP的使用目的相同，但是比JSONP更强大。<br>JSONP只支持GET请求，CORS支持所有类型的HTTP请求。JSONP的优势在于支持老式浏览器，以及可以向不支持CORS的网站请求数据。</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2016/04/cors.html">http://www.ruanyifeng.com/blog/2016/04/cors.html</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://swoole.app/2016/12/13/%E7%94%A8matplotlib%E7%BB%98%E5%88%B6%E7%B2%BE%E7%BE%8E%E7%9A%84%E5%9B%BE%E8%A1%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lnmput@gmail.com">
      <meta itemprop="description" content="一个专注记录外贸网站开发技术栈的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨子鳄鱼 ● 外贸自建站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/12/13/%E7%94%A8matplotlib%E7%BB%98%E5%88%B6%E7%B2%BE%E7%BE%8E%E7%9A%84%E5%9B%BE%E8%A1%A8/" class="post-title-link" itemprop="url">用matplotlib绘制精美的图表</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">نُشر في</span>

      <time title="أُنشأ: 2016-12-13 15:40:10" itemprop="dateCreated datePublished" datetime="2016-12-13T15:40:10+09:00">2016-12-13</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">عُدل في</span>
        <time title="عُدل: 2018-03-27 22:42:12" itemprop="dateModified" datetime="2018-03-27T22:42:12+09:00">2018-03-27</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote class="blockquote-center">
如果你爱一个人，一定要告诉他，不是为了要他报答，而是让他在以后黑暗的日子里，否定自己的时候，想起世界上还有人这么爱他，他并非一无是处。
</blockquote>
### 安装方法

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install matplotlib</span><br></pre></td></tr></table></figure>

<h3 id="绘制一元函数图像y-ax-b"><a href="#绘制一元函数图像y-ax-b" class="headerlink" title="绘制一元函数图像y=ax+b"></a>绘制一元函数图像y=ax+b</h3><p>创建single_variable.py，内容如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding( <span class="string">&quot;utf-8&quot;</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.figure() <span class="comment"># 实例化作图变量</span></span><br><span class="line">plt.title(<span class="string">&#x27;single variable&#x27;</span>) <span class="comment"># 图像标题</span></span><br><span class="line">plt.xlabel(<span class="string">&#x27;x&#x27;</span>) <span class="comment"># x轴文本</span></span><br><span class="line">plt.ylabel(<span class="string">&#x27;y&#x27;</span>) <span class="comment"># y轴文本</span></span><br><span class="line">plt.axis([<span class="number">0</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">10</span>]) <span class="comment"># x轴范围0-5，y轴范围0-10</span></span><br><span class="line">plt.grid(<span class="literal">True</span>) <span class="comment"># 是否绘制网格线</span></span><br><span class="line">xx = np.linspace(<span class="number">0</span>, <span class="number">5</span>, <span class="number">10</span>) <span class="comment"># 在0-5之间生成10个点的向量</span></span><br><span class="line">plt.plot(xx, <span class="number">2</span>*xx, <span class="string">&#x27;g-&#x27;</span>) <span class="comment"># 绘制y=2x图像，颜色green，形式为线条</span></span><br><span class="line">plt.show() <span class="comment"># 展示图像</span></span><br></pre></td></tr></table></figure>
<h3 id="绘制正弦曲线y-sin-x"><a href="#绘制正弦曲线y-sin-x" class="headerlink" title="绘制正弦曲线y=sin(x)"></a>绘制正弦曲线y=sin(x)</h3><p>创建sinx.py，内容如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding( <span class="string">&quot;utf-8&quot;</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.figure() <span class="comment"># 实例化作图变量</span></span><br><span class="line">plt.title(<span class="string">&#x27;single variable&#x27;</span>) <span class="comment"># 图像标题</span></span><br><span class="line">plt.xlabel(<span class="string">&#x27;x&#x27;</span>) <span class="comment"># x轴文本</span></span><br><span class="line">plt.ylabel(<span class="string">&#x27;y&#x27;</span>) <span class="comment"># y轴文本</span></span><br><span class="line">plt.axis([-<span class="number">12</span>, <span class="number">12</span>, -<span class="number">1</span>, <span class="number">1</span>]) <span class="comment"># x轴范围-12到12，y轴范围-1到1</span></span><br><span class="line">plt.grid(<span class="literal">True</span>) <span class="comment"># 是否绘制网格线</span></span><br><span class="line">xx = np.linspace(-<span class="number">12</span>, <span class="number">12</span>, <span class="number">1000</span>) <span class="comment"># 在-12到12之间生成1000个点的向量</span></span><br><span class="line">plt.plot(xx, np.sin(xx), <span class="string">&#x27;g-&#x27;</span>, label=<span class="string">&quot;$sin(x)$&quot;</span>) <span class="comment"># 绘制y=sin(x)图像，颜色green，形式为线条</span></span><br><span class="line">plt.plot(xx, np.cos(xx), <span class="string">&#x27;r--&#x27;</span>, label=<span class="string">&quot;$cos(x)$&quot;</span>) <span class="comment"># 绘制y=cos(x)图像，颜色red，形式为虚线</span></span><br><span class="line">plt.legend() <span class="comment"># 绘制图例</span></span><br><span class="line">plt.show() <span class="comment"># 展示图像</span></span><br></pre></td></tr></table></figure>
<h3 id="绘制多轴图"><a href="#绘制多轴图" class="headerlink" title="绘制多轴图"></a>绘制多轴图</h3><p>创建multi_axis.py内容如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding( <span class="string">&quot;utf-8&quot;</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">draw</span>(<span class="params">plt</span>):</span></span><br><span class="line">    plt.axis([-<span class="number">12</span>, <span class="number">12</span>, -<span class="number">1</span>, <span class="number">1</span>]) <span class="comment"># x轴范围-12到12，y轴范围-1到1</span></span><br><span class="line">    plt.grid(<span class="literal">True</span>) <span class="comment"># 是否绘制网格线</span></span><br><span class="line">    xx = np.linspace(-<span class="number">12</span>, <span class="number">12</span>, <span class="number">1000</span>) <span class="comment"># 在-12到12之间生成1000个点的向量</span></span><br><span class="line">    plt.plot(xx, np.sin(xx), <span class="string">&#x27;g-&#x27;</span>, label=<span class="string">&quot;$sin(x)$&quot;</span>) <span class="comment"># 绘制y=sin(x)图像，颜色green，形式为线条</span></span><br><span class="line">    plt.plot(xx, np.cos(xx), <span class="string">&#x27;r--&#x27;</span>, label=<span class="string">&quot;$cos(x)$&quot;</span>) <span class="comment"># 绘制y=cos(x)图像，颜色red，形式为虚线</span></span><br><span class="line">    plt.legend() <span class="comment"># 绘制图例</span></span><br><span class="line"></span><br><span class="line">plt.figure() <span class="comment"># 实例化作图变量</span></span><br><span class="line">plt1 = plt.subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>) <span class="comment"># 两行两列中的第1张图</span></span><br><span class="line">draw(plt1)</span><br><span class="line">plt2 = plt.subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>) <span class="comment"># 两行两列中的第2张图</span></span><br><span class="line">draw(plt2)</span><br><span class="line">plt3 = plt.subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>) <span class="comment"># 两行两列中的第3张图</span></span><br><span class="line">draw(plt3)</span><br><span class="line">plt4 = plt.subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">4</span>) <span class="comment"># 两行两列中的第4张图</span></span><br><span class="line">draw(plt4)</span><br><span class="line"></span><br><span class="line">plt.show() <span class="comment"># 展示图像</span></span><br></pre></td></tr></table></figure>
<h3 id="绘制3D图像"><a href="#绘制3D图像" class="headerlink" title="绘制3D图像"></a>绘制3D图像</h3><p>创建plot_3d.py，内容如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding( <span class="string">&quot;utf-8&quot;</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> mpl_toolkits.mplot3d <span class="keyword">import</span> Axes3D</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax = fig.add_subplot(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,projection=<span class="string">&#x27;3d&#x27;</span>)</span><br><span class="line">theta = np.linspace(-<span class="number">4</span> * np.pi, <span class="number">4</span> * np.pi, <span class="number">500</span>) <span class="comment"># theta旋转角从-4pi到4pi，相当于两圈</span></span><br><span class="line">z = np.linspace(<span class="number">0</span>, <span class="number">2</span>, <span class="number">500</span>) <span class="comment"># z轴从下到上,从-2到2之间画100个点</span></span><br><span class="line">r = z <span class="comment"># 半径设置为z大小</span></span><br><span class="line">x = r * np.sin(theta) <span class="comment"># x和y画圆</span></span><br><span class="line">y = r * np.cos(theta) <span class="comment"># x和y画圆</span></span><br><span class="line">ax.plot(x, y, z, label=<span class="string">&#x27;curve&#x27;</span>)</span><br><span class="line">ax.legend()</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<h3 id="3D散点图"><a href="#3D散点图" class="headerlink" title="3D散点图"></a>3D散点图</h3><p>创建plot_3d_scatter.py，内容如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding( <span class="string">&quot;utf-8&quot;</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> mpl_toolkits.mplot3d <span class="keyword">import</span> Axes3D</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax = fig.add_subplot(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,projection=<span class="string">&#x27;3d&#x27;</span>)</span><br><span class="line">xx = np.linspace(<span class="number">0</span>, <span class="number">5</span>, <span class="number">10</span>) <span class="comment"># 在0-5之间生成10个点的向量</span></span><br><span class="line">yy = np.linspace(<span class="number">0</span>, <span class="number">5</span>, <span class="number">10</span>) <span class="comment"># 在0-5之间生成10个点的向量</span></span><br><span class="line">zz1 = xx</span><br><span class="line">zz2 = <span class="number">2</span>*xx</span><br><span class="line">zz3 = <span class="number">3</span>*xx</span><br><span class="line">ax.scatter(xx, yy, zz1, c=<span class="string">&#x27;red&#x27;</span>, marker=<span class="string">&#x27;o&#x27;</span>) <span class="comment"># o型符号</span></span><br><span class="line">ax.scatter(xx, yy, zz2, c=<span class="string">&#x27;green&#x27;</span>, marker=<span class="string">&#x27;^&#x27;</span>) <span class="comment"># 三角型符号</span></span><br><span class="line">ax.scatter(xx, yy, zz3, c=<span class="string">&#x27;black&#x27;</span>, marker=<span class="string">&#x27;*&#x27;</span>) <span class="comment"># 星型符号</span></span><br><span class="line">ax.legend()</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<h3 id="绘制3D表面"><a href="#绘制3D表面" class="headerlink" title="绘制3D表面"></a>绘制3D表面</h3><p>创建plot_3d_surface.py，内容如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding( <span class="string">&quot;utf-8&quot;</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> mpl_toolkits.mplot3d <span class="keyword">import</span> Axes3D</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> cm</span><br><span class="line"><span class="keyword">from</span> matplotlib.ticker <span class="keyword">import</span> LinearLocator, FormatStrFormatter</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax = fig.gca(projection=<span class="string">&#x27;3d&#x27;</span>)</span><br><span class="line"></span><br><span class="line">X = np.arange(-<span class="number">5</span>, <span class="number">5</span>, <span class="number">0.25</span>)</span><br><span class="line">Y = np.arange(-<span class="number">5</span>, <span class="number">5</span>, <span class="number">0.25</span>)</span><br><span class="line">X, Y = np.meshgrid(X, Y)</span><br><span class="line"></span><br><span class="line">Z = X**<span class="number">2</span>+Y**<span class="number">2</span></span><br><span class="line"></span><br><span class="line">ax.plot_surface(X, Y, Z, rstride=<span class="number">1</span>, cstride=<span class="number">1</span>, cmap=cm.coolwarm, linewidth=<span class="number">0</span>, antialiased=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://swoole.app/2016/12/13/%E4%BD%BF%E7%94%A8python%E6%93%8D%E4%BD%9Celasticsearch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lnmput@gmail.com">
      <meta itemprop="description" content="一个专注记录外贸网站开发技术栈的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨子鳄鱼 ● 外贸自建站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/12/13/%E4%BD%BF%E7%94%A8python%E6%93%8D%E4%BD%9Celasticsearch/" class="post-title-link" itemprop="url">使用python操作elasticsearch</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">نُشر في</span>

      <time title="أُنشأ: 2016-12-13 10:19:01" itemprop="dateCreated datePublished" datetime="2016-12-13T10:19:01+09:00">2016-12-13</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">عُدل في</span>
        <time title="عُدل: 2018-03-27 22:37:10" itemprop="dateModified" datetime="2018-03-27T22:37:10+09:00">2018-03-27</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote class="blockquote-center">
和你们这些少爷不同，我们光是活着就竭尽全力了。
</blockquote>
Lately, here at Tryolabs, we started gaining interest in big data and search related platforms which are giving us excellent resources to create our complex web applications. One of them is Elasticsearch.
Elastic{ON}15, the first ES conference is coming, and since nowadays we see a lot of interest in this technology, we are taking the opportunity to give an introduction and a simple example for Python developers out there that want to begin using it or give it a try.
### 1. What is Elasticsearch?

<p>Elasticsearch is a distributed, real-time, search and analytics platform.</p>
<h3 id="2-Yeah-but-what-IS-Elasticsearch"><a href="#2-Yeah-but-what-IS-Elasticsearch" class="headerlink" title="2. Yeah, but what IS Elasticsearch?"></a>2. Yeah, but what IS Elasticsearch?</h3><p>Good question! In the previous definition you can see all these hype-sounding tech terms (distributed, real-time, analytics), so let’s try to explain.<br>ES is distributed, it organizes information in clusters of nodes, so it will run in multiple servers if we intend it to.<br>ES is real-time, since data is indexed, we get responses to our queries super fast!<br>And last but not least, it does searches and analytics. The main problem we are solving with this tool is exploring our data!<br>A platform like ES is the foundation for any respectable search engine.</p>
<h3 id="3-How-does-it-work"><a href="#3-How-does-it-work" class="headerlink" title="3. How does it work?"></a>3. How does it work?</h3><p>Using a restful API, Elasticsearch saves data and indexes it automatically. It assigns types to fields and that way a search can be done smartly and quickly using filters and different queries.<br>It’s uses JVM in order to be as fast as possible. It distributes indexes in “shards” of data. It replicates shards in different nodes, so it’s distributed and clusters can function even if not all nodes are operational. Adding nodes is super easy and that’s what makes it so scalable.<br>ES uses Lucene to solve searches. This is quite an advantage with comparing with, for example, Django query strings. A restful API call allows us to perform searches using json objects as parameters, making it much more flexible and giving each search parameter within the object a different weight, importance and or priority.<br>The final result ranks objects that comply with the search query requirements. You could even use synonyms, autocompletes, spell suggestions and correct typos. While the usual query strings provides results that follow certain logic rules, ES queries give you a ranked list of results that may fall in different criteria and its order depend on how they comply with a certain rule or filter.<br>ES can also provide answers for data analysis, like averages, how many unique terms and or statistics. This could be done using aggregations. To dig a little deeper in this feature check the documentation here.</p>
<h3 id="4-Should-I-use-ES"><a href="#4-Should-I-use-ES" class="headerlink" title="4. Should I use ES?"></a>4. Should I use ES?</h3><p>The main point is scalability and getting results and insights very fast. In most cases using Lucene could be enough to have all you need.<br>It seems sometimes that these tools are designed for projects with tons of data and are distributed in order to handle tons of users. Startups dream of growing to that scenario, but may start thinking small first to build a prototype and then when the data is there, start thinking about scaling problems.<br>Does it make sense and pays off to be prepared to grow A LOT? Why not? Elasticsearch has no drawback and is easy to use, so it’s just a decision of using it to be prepared for the future.<br>I’m going to give you a quick example of a dead simple project using Elasticsearch to quickly and beautifully search for some example data. It will be quick to do, Python powered and ready to scale in case we need it to, so, best of both worlds.</p>
<h3 id="5-Easy-first-steps-with-ES"><a href="#5-Easy-first-steps-with-ES" class="headerlink" title="5. Easy first steps with ES"></a>5. Easy first steps with ES</h3><p>For the following part it would be nice to be familiarized with concepts like Cluster, Node, Document, Index. Take a look at the official guide if you have doubts.<br>First things first, get ES from here.<br>I followed this video tutorial to get things started in just a minute. I recommend all you to check it out later.<br>Once you downloaded ES, it’s as simple as running bin/elasticsearch and you will have your ES cluster with one node running! You can interact with it at <a target="_blank" rel="noopener" href="http://localhost:9200/">http://localhost:9200/</a><br>If you hit it you will get something like this:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;status&quot;</span> : <span class="number">200</span>,</span><br><span class="line">  <span class="attr">&quot;name&quot;</span> : <span class="string">&quot;Delphine Courtney&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;cluster_name&quot;</span> : <span class="string">&quot;elasticsearch&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;version&quot;</span> : &#123;</span><br><span class="line">    <span class="attr">&quot;number&quot;</span> : <span class="string">&quot;1.4.2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;build_hash&quot;</span> : <span class="string">&quot;927caff6f05403e936c20bf4529f144f0c89fd8c&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;build_timestamp&quot;</span> : <span class="string">&quot;2014-12-16T14:11:12Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;build_snapshot&quot;</span> : <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">&quot;lucene_version&quot;</span> : <span class="string">&quot;4.10.2&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;tagline&quot;</span> : <span class="string">&quot;You Know, for Search&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>view rawes_first.json hosted with ❤ by GitHub<br>Creating another node is as simple as:<br>bin/elasticsearch -Des.node.name=Node-2<br>It automatically detects the old node as its master and joins our cluster. By default we will be able to communicate with this new node using the 9201 port <a target="_blank" rel="noopener" href="http://localhost:9201/">http://localhost:9201</a>. Now we can talk with each node and receive the same data, they are supposed to be identical.</p>
<h3 id="6-Let’s-Pythonize-this-thing"><a href="#6-Let’s-Pythonize-this-thing" class="headerlink" title="6. Let’s Pythonize this thing!"></a>6. Let’s Pythonize this thing!</h3><p>To use ES with our all time favorite language; Python, it gets easier if we install elasticsearch-py package.<br>pip install elasticsearch<br>Now we will be able to use this package to index and search data using Python.</p>
<h3 id="7-Let’s-add-some-public-data-to-our-cluster"><a href="#7-Let’s-add-some-public-data-to-our-cluster" class="headerlink" title="7. Let’s add some public data to our cluster"></a>7. Let’s add some public data to our cluster</h3><p>So, I wanted to make this project a “real world example”, I really did, but after I found out there is a star wars API (<a target="_blank" rel="noopener" href="http://swapi.co/">http://swapi.co/</a>), I couldn’t resist it and ended up being a fictional -  ”galaxy far far away” example.  The API is dead simple to use, so we will get some data from there.<br>I’m using an IPython Notebook to do this test, I started with the sample request to make sure we can hit the ES server.</p>
<h1 id="make-sure-ES-is-up-and-running"><a href="#make-sure-ES-is-up-and-running" class="headerlink" title="make sure ES is up and running"></a>make sure ES is up and running</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">res = requests.get(<span class="string">&#x27;http://localhost:9200&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(res.content)</span><br></pre></td></tr></table></figure>
<p>view rawes_first.py hosted with ❤ by GitHub<br>Then we connect to our ES server using Python and the elasticsearch-py library:<br>#connect to our cluster</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> elasticsearch <span class="keyword">import</span> Elasticsearch</span><br><span class="line">es = Elasticsearch([&#123;<span class="string">&#x27;host&#x27;</span>: <span class="string">&#x27;localhost&#x27;</span>, <span class="string">&#x27;port&#x27;</span>: <span class="number">9200</span>&#125;])</span><br></pre></td></tr></table></figure>
<p>view rawes_first3.py hosted with ❤ by GitHub<br>I added some data to test, and then deleted it. I’m skipping that part for this guide, but you can check it out in the notebook.<br>Now, using The Force, we connect to the Star Wars API and index some fictional people.<br>#let’s iterate over swapi people documents and index them</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line">r = requests.get(<span class="string">&#x27;http://localhost:9200&#x27;</span>) </span><br><span class="line">i = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> r.status_code == <span class="number">200</span>:</span><br><span class="line">    r = requests.get(<span class="string">&#x27;http://swapi.co/api/people/&#x27;</span>+ <span class="built_in">str</span>(i))</span><br><span class="line">    es.index(index=<span class="string">&#x27;sw&#x27;</span>, doc_type=<span class="string">&#x27;people&#x27;</span>, <span class="built_in">id</span>=i, body=json.loads(r.content))</span><br><span class="line">    i=i+<span class="number">1</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure>
<p>view rawes_first4.py hosted with ❤ by GitHub<br>Please, notice that we automatically created an index “sw” and a “doc_type” with de indexing command. We get 17 responses from swapi and index them with ES. I’m sure there are much more “people” in the swapi DB, but it seems we are getting a 404 with <a target="_blank" rel="noopener" href="http://swapi.co/api/people/17">http://swapi.co/api/people/17</a>. Bug report here! :-)<br>Anyway, to see if all worked with this few results, we try to get the document with id=5.<br>es.get(index=’sw’, doc_type=’people’, id=5)<br>view rawes_first10.py hosted with ❤ by GitHub<br>We will get Princess Leia:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;u&#x27;_id&#x27;: u&#x27;<span class="number">5</span>&#x27;,</span><br><span class="line"> u&#x27;_index&#x27;: u&#x27;sw&#x27;,</span><br><span class="line"> u&#x27;_source&#x27;: &#123;u&#x27;birth_year&#x27;: u&#x27;<span class="number">19</span>BBY&#x27;,</span><br><span class="line">  u&#x27;created&#x27;: u&#x27;<span class="number">2014</span><span class="number">-12</span><span class="number">-10</span>T15:<span class="number">20</span>:<span class="number">09.791000</span>Z&#x27;,</span><br><span class="line">  u&#x27;edited&#x27;: u&#x27;<span class="number">2014</span><span class="number">-12</span><span class="number">-20</span>T21:<span class="number">17</span>:<span class="number">50.315000</span>Z&#x27;,</span><br><span class="line">  u&#x27;eye_color&#x27;: u&#x27;brown&#x27;,</span><br><span class="line">  u&#x27;films&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/films/1/&#x27;,</span></span><br><span class="line">   u&#x27;http:<span class="comment">//swapi.co/api/films/2/&#x27;,</span></span><br><span class="line">   u&#x27;http:<span class="comment">//swapi.co/api/films/3/&#x27;,</span></span><br><span class="line">   u&#x27;http:<span class="comment">//swapi.co/api/films/6/&#x27;],</span></span><br><span class="line">  u&#x27;gender&#x27;: u&#x27;female&#x27;,</span><br><span class="line">  u&#x27;hair_color&#x27;: u&#x27;brown&#x27;,</span><br><span class="line">  u&#x27;height&#x27;: u&#x27;<span class="number">150</span>&#x27;,</span><br><span class="line">  u&#x27;homeworld&#x27;: u&#x27;http:<span class="comment">//swapi.co/api/planets/2/&#x27;,</span></span><br><span class="line">  u&#x27;mass&#x27;: u&#x27;<span class="number">49</span>&#x27;,</span><br><span class="line">  u&#x27;name&#x27;: u&#x27;Leia Organa&#x27;,</span><br><span class="line">  u&#x27;skin_color&#x27;: u&#x27;light&#x27;,</span><br><span class="line">  u&#x27;species&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/species/1/&#x27;],</span></span><br><span class="line">  u&#x27;starships&#x27;: [],</span><br><span class="line">  u&#x27;url&#x27;: u&#x27;http:<span class="comment">//swapi.co/api/people/5/&#x27;,</span></span><br><span class="line">  u&#x27;vehicles&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/vehicles/30/&#x27;]&#125;,</span></span><br><span class="line"> u&#x27;_type&#x27;: u&#x27;people&#x27;,</span><br><span class="line"> u&#x27;_version&#x27;: <span class="number">1</span>,</span><br><span class="line"> u&#x27;found&#x27;: True&#125;</span><br></pre></td></tr></table></figure>
<p>view rawes_first5.py hosted with ❤ by GitHub<br>Now, let’s add more data, this time using node 2! And let’s start at the 18th person, where we stopped.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">r = requests.get(<span class="string">&#x27;http://localhost:9201&#x27;</span>)</span><br><span class="line">i = <span class="number">18</span></span><br><span class="line"><span class="keyword">while</span> r.status_code == <span class="number">200</span>:</span><br><span class="line">   r = requests.get(<span class="string">&#x27;http://swapi.co/api/people/&#x27;</span>+ <span class="built_in">str</span>(i))</span><br><span class="line">   es.index(index=<span class="string">&#x27;sw&#x27;</span>, doc_type=<span class="string">&#x27;people&#x27;</span>, <span class="built_in">id</span>=i,     body=json.loads(r.content))</span><br><span class="line">   i=i+<span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>view rawes_first6.py hosted with ❤ by GitHub<br>We got the rest of the characters just fine.</p>
<h3 id="8-Now-let’s-try-an-interesting-search"><a href="#8-Now-let’s-try-an-interesting-search" class="headerlink" title="8. Now, let’s try an interesting search"></a>8. Now, let’s try an interesting search</h3><p>Where is Darth Vader? Here is our search query:<br>es.search(index=”sw”, body={“query”: {“match”: {‘name’:’Darth Vader’}}})<br>view rawes_first7.py hosted with ❤ by GitHub<br>This will give us both Darth Vader AND Darth Maul. Id 4 and id 44 (notice that they are in the same index, even if we use different node client call the index command). Both results have a score, although Darth Vader is much higher than Darth Maul (2.77 vs 0.60) since Vader is a exact match. Take that Darth Maul!</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&#123;u&#x27;_shards&#x27;: &#123;u&#x27;failed&#x27;: <span class="number">0</span>, u&#x27;successful&#x27;: <span class="number">5</span>, u&#x27;total&#x27;: <span class="number">5</span>&#125;,</span><br><span class="line"> u&#x27;hits&#x27;: &#123;u&#x27;hits&#x27;: [&#123;u&#x27;_id&#x27;: u&#x27;<span class="number">4</span>&#x27;,</span><br><span class="line">    u&#x27;_index&#x27;: u&#x27;sw&#x27;,</span><br><span class="line">    u&#x27;_score&#x27;: <span class="number">2.7754524</span>,</span><br><span class="line">    u&#x27;_source&#x27;: &#123;u&#x27;birth_year&#x27;: u&#x27;<span class="number">41.9</span>BBY&#x27;,</span><br><span class="line">     u&#x27;created&#x27;: u&#x27;<span class="number">2014</span><span class="number">-12</span><span class="number">-10</span>T15:<span class="number">18</span>:<span class="number">20.704000</span>Z&#x27;,</span><br><span class="line">     u&#x27;edited&#x27;: u&#x27;<span class="number">2014</span><span class="number">-12</span><span class="number">-20</span>T21:<span class="number">17</span>:<span class="number">50.313000</span>Z&#x27;,</span><br><span class="line">     u&#x27;eye_color&#x27;: u&#x27;yellow&#x27;,</span><br><span class="line">     u&#x27;films&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/films/1/&#x27;,</span></span><br><span class="line">      u&#x27;http:<span class="comment">//swapi.co/api/films/2/&#x27;,</span></span><br><span class="line">      u&#x27;http:<span class="comment">//swapi.co/api/films/3/&#x27;,</span></span><br><span class="line">      u&#x27;http:<span class="comment">//swapi.co/api/films/6/&#x27;],</span></span><br><span class="line">     u&#x27;gender&#x27;: u&#x27;male&#x27;,</span><br><span class="line">     u&#x27;hair_color&#x27;: u&#x27;none&#x27;,</span><br><span class="line">     u&#x27;height&#x27;: u&#x27;<span class="number">202</span>&#x27;,</span><br><span class="line">     u&#x27;homeworld&#x27;: u&#x27;http:<span class="comment">//swapi.co/api/planets/1/&#x27;,</span></span><br><span class="line">     u&#x27;mass&#x27;: u&#x27;<span class="number">136</span>&#x27;,</span><br><span class="line">     u&#x27;name&#x27;: u&#x27;Darth Vader&#x27;,</span><br><span class="line">     u&#x27;skin_color&#x27;: u&#x27;white&#x27;,</span><br><span class="line">     u&#x27;species&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/species/1/&#x27;],</span></span><br><span class="line">     u&#x27;starships&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/starships/13/&#x27;],</span></span><br><span class="line">     u&#x27;url&#x27;: u&#x27;http:<span class="comment">//swapi.co/api/people/4/&#x27;,</span></span><br><span class="line">     u&#x27;vehicles&#x27;: []&#125;,</span><br><span class="line">    u&#x27;_type&#x27;: u&#x27;people&#x27;&#125;,</span><br><span class="line">   &#123;u&#x27;_id&#x27;: u&#x27;<span class="number">44</span>&#x27;,</span><br><span class="line">    u&#x27;_index&#x27;: u&#x27;sw&#x27;,</span><br><span class="line">    u&#x27;_score&#x27;: <span class="number">0.6085256</span>,</span><br><span class="line">    u&#x27;_source&#x27;: &#123;u&#x27;birth_year&#x27;: u&#x27;<span class="number">54</span>BBY&#x27;,</span><br><span class="line">     u&#x27;created&#x27;: u&#x27;<span class="number">2014</span><span class="number">-12</span><span class="number">-19</span>T18:<span class="number">00</span>:<span class="number">41.929000</span>Z&#x27;,</span><br><span class="line">     u&#x27;edited&#x27;: u&#x27;<span class="number">2014</span><span class="number">-12</span><span class="number">-20</span>T21:<span class="number">17</span>:<span class="number">50.403000</span>Z&#x27;,</span><br><span class="line">     u&#x27;eye_color&#x27;: u&#x27;yellow&#x27;,</span><br><span class="line">     u&#x27;films&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/films/4/&#x27;],</span></span><br><span class="line">     u&#x27;gender&#x27;: u&#x27;male&#x27;,</span><br><span class="line">     u&#x27;hair_color&#x27;: u&#x27;none&#x27;,</span><br><span class="line">     u&#x27;height&#x27;: u&#x27;<span class="number">175</span>&#x27;,</span><br><span class="line">     u&#x27;homeworld&#x27;: u&#x27;http:<span class="comment">//swapi.co/api/planets/36/&#x27;,</span></span><br><span class="line">     u&#x27;mass&#x27;: u&#x27;<span class="number">80</span>&#x27;,</span><br><span class="line">     u&#x27;name&#x27;: u&#x27;Darth Maul&#x27;,</span><br><span class="line">     u&#x27;skin_color&#x27;: u&#x27;red&#x27;,</span><br><span class="line">     u&#x27;species&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/species/22/&#x27;],</span></span><br><span class="line">     u&#x27;starships&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/starships/41/&#x27;],</span></span><br><span class="line">     u&#x27;url&#x27;: u&#x27;http:<span class="comment">//swapi.co/api/people/44/&#x27;,</span></span><br><span class="line">     u&#x27;vehicles&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/vehicles/42/&#x27;]&#125;,</span></span><br><span class="line">    u&#x27;_type&#x27;: u&#x27;people&#x27;&#125;],</span><br><span class="line">  u&#x27;max_score&#x27;: <span class="number">2.7754524</span>,</span><br><span class="line">  u&#x27;total&#x27;: <span class="number">2</span>&#125;,</span><br><span class="line"> u&#x27;timed_out&#x27;: False,</span><br><span class="line"> u&#x27;took&#x27;: <span class="number">44</span>&#125;</span><br></pre></td></tr></table></figure>
<p>view rawes_first8.py hosted with ❤ by GitHub<br>So, this query will give us results if the word is contained exactly in our indexed data. What if we want to build some kind of autocomplete input where we get the names that contain the characters we are typing?<br>There are many ways to do that and another great number of queries. Take a look here to learn more. I picked this one to get all documents with prefix “lu” in their name field:<br><code>es.search(index=&quot;sw&quot;, body=&#123;&quot;query&quot;: &#123;&quot;prefix&quot; : &#123; &quot;name&quot; : &quot;lu&quot; &#125;&#125;&#125;)</code><br>view rawes_first9.py hosted with ❤ by GitHub<br>We will get Luke Skywalker and Luminara Unduli, both with the same 1.0 score, since they match with the same 2 initial characters.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&#123;u&#x27;_shards&#x27;: &#123;u&#x27;failed&#x27;: <span class="number">0</span>, u&#x27;successful&#x27;: <span class="number">5</span>, u&#x27;total&#x27;: <span class="number">5</span>&#125;,</span><br><span class="line"> u&#x27;hits&#x27;: &#123;u&#x27;hits&#x27;: [&#123;u&#x27;_id&#x27;: u&#x27;<span class="number">1</span>&#x27;,</span><br><span class="line">    u&#x27;_index&#x27;: u&#x27;sw&#x27;,</span><br><span class="line">    u&#x27;_score&#x27;: <span class="number">1.0</span>,</span><br><span class="line">    u&#x27;_source&#x27;: &#123;u&#x27;birth_year&#x27;: u&#x27;<span class="number">19</span>BBY&#x27;,</span><br><span class="line">     u&#x27;created&#x27;: u&#x27;<span class="number">2014</span><span class="number">-12</span><span class="number">-09</span>T13:<span class="number">50</span>:<span class="number">51.644000</span>Z&#x27;,</span><br><span class="line">     u&#x27;edited&#x27;: u&#x27;<span class="number">2014</span><span class="number">-12</span><span class="number">-20</span>T21:<span class="number">17</span>:<span class="number">56.891000</span>Z&#x27;,</span><br><span class="line">     u&#x27;eye_color&#x27;: u&#x27;blue&#x27;,</span><br><span class="line">     u&#x27;films&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/films/1/&#x27;,</span></span><br><span class="line">      u&#x27;http:<span class="comment">//swapi.co/api/films/2/&#x27;,</span></span><br><span class="line">      u&#x27;http:<span class="comment">//swapi.co/api/films/3/&#x27;,</span></span><br><span class="line">      u&#x27;http:<span class="comment">//swapi.co/api/films/6/&#x27;],</span></span><br><span class="line">     u&#x27;gender&#x27;: u&#x27;male&#x27;,</span><br><span class="line">     u&#x27;hair_color&#x27;: u&#x27;blond&#x27;,</span><br><span class="line">     u&#x27;height&#x27;: u&#x27;<span class="number">172</span>&#x27;,</span><br><span class="line">     u&#x27;homeworld&#x27;: u&#x27;http:<span class="comment">//swapi.co/api/planets/1/&#x27;,</span></span><br><span class="line">     u&#x27;mass&#x27;: u&#x27;<span class="number">77</span>&#x27;,</span><br><span class="line">     u&#x27;name&#x27;: u&#x27;Luke Skywalker&#x27;,</span><br><span class="line">     u&#x27;skin_color&#x27;: u&#x27;fair&#x27;,</span><br><span class="line">     u&#x27;species&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/species/1/&#x27;],</span></span><br><span class="line">     u&#x27;starships&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/starships/12/&#x27;,</span></span><br><span class="line">      u&#x27;http:<span class="comment">//swapi.co/api/starships/22/&#x27;],</span></span><br><span class="line">     u&#x27;url&#x27;: u&#x27;http:<span class="comment">//swapi.co/api/people/1/&#x27;,</span></span><br><span class="line">     u&#x27;vehicles&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/vehicles/14/&#x27;,</span></span><br><span class="line">      u&#x27;http:<span class="comment">//swapi.co/api/vehicles/30/&#x27;]&#125;,</span></span><br><span class="line">    u&#x27;_type&#x27;: u&#x27;people&#x27;&#125;,</span><br><span class="line">   &#123;u&#x27;_id&#x27;: u&#x27;<span class="number">64</span>&#x27;,</span><br><span class="line">    u&#x27;_index&#x27;: u&#x27;sw&#x27;,</span><br><span class="line">    u&#x27;_score&#x27;: <span class="number">1.0</span>,</span><br><span class="line">    u&#x27;_source&#x27;: &#123;u&#x27;birth_year&#x27;: u&#x27;<span class="number">58</span>BBY&#x27;,</span><br><span class="line">     u&#x27;created&#x27;: u&#x27;<span class="number">2014</span><span class="number">-12</span><span class="number">-20</span>T16:<span class="number">45</span>:<span class="number">53.668000</span>Z&#x27;,</span><br><span class="line">     u&#x27;edited&#x27;: u&#x27;<span class="number">2014</span><span class="number">-12</span><span class="number">-20</span>T21:<span class="number">17</span>:<span class="number">50.455000</span>Z&#x27;,</span><br><span class="line">     u&#x27;eye_color&#x27;: u&#x27;blue&#x27;,</span><br><span class="line">     u&#x27;films&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/films/5/&#x27;,</span></span><br><span class="line">      u&#x27;http:<span class="comment">//swapi.co/api/films/6/&#x27;],</span></span><br><span class="line">     u&#x27;gender&#x27;: u&#x27;female&#x27;,</span><br><span class="line">     u&#x27;hair_color&#x27;: u&#x27;black&#x27;,</span><br><span class="line">     u&#x27;height&#x27;: u&#x27;<span class="number">170</span>&#x27;,</span><br><span class="line">     u&#x27;homeworld&#x27;: u&#x27;http:<span class="comment">//swapi.co/api/planets/51/&#x27;,</span></span><br><span class="line">     u&#x27;mass&#x27;: u&#x27;<span class="number">56.2</span>&#x27;,</span><br><span class="line">     u&#x27;name&#x27;: u&#x27;Luminara Unduli&#x27;,</span><br><span class="line">     u&#x27;skin_color&#x27;: u&#x27;yellow&#x27;,</span><br><span class="line">     u&#x27;species&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/species/29/&#x27;],</span></span><br><span class="line">     u&#x27;starships&#x27;: [],</span><br><span class="line">     u&#x27;url&#x27;: u&#x27;http:<span class="comment">//swapi.co/api/people/64/&#x27;,</span></span><br><span class="line">     u&#x27;vehicles&#x27;: []&#125;,</span><br><span class="line">    u&#x27;_type&#x27;: u&#x27;people&#x27;&#125;],</span><br><span class="line">  u&#x27;max_score&#x27;: <span class="number">1.0</span>,</span><br><span class="line">  u&#x27;total&#x27;: <span class="number">2</span>&#125;,</span><br><span class="line"> u&#x27;timed_out&#x27;: False,</span><br><span class="line"> u&#x27;took&#x27;: <span class="number">9</span>&#125;</span><br></pre></td></tr></table></figure>
<p>view rawes_first11.py hosted with ❤ by GitHub<br>There are many other interesting queries we can do. If, for example, we want to get all elements similar in some way, for a related or correction search we can use something like this:<br>es.search(index=”sw”, body={“query”:<br>{“fuzzy_like_this_field” : { “name” :<br>{“like_text”: “jaba”, “max_query_terms”:5}}}})<br>view rawes_first1.py hosted with ❤ by GitHub<br>And we got Jabba although we had a typo in our search query. That is powerful!</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;u&#x27;_shards&#x27;: &#123;u&#x27;failed&#x27;: <span class="number">0</span>, u&#x27;successful&#x27;: <span class="number">5</span>, u&#x27;total&#x27;: <span class="number">5</span>&#125;,</span><br><span class="line"> u&#x27;hits&#x27;: &#123;u&#x27;hits&#x27;: [&#123;u&#x27;_id&#x27;: u&#x27;<span class="number">16</span>&#x27;,</span><br><span class="line">    u&#x27;_index&#x27;: u&#x27;sw&#x27;,</span><br><span class="line">    u&#x27;_score&#x27;: <span class="number">1.5700331</span>,</span><br><span class="line">    u&#x27;_source&#x27;: &#123;u&#x27;birth_year&#x27;: u&#x27;<span class="number">600</span>BBY&#x27;,</span><br><span class="line">     u&#x27;created&#x27;: u&#x27;<span class="number">2014</span><span class="number">-12</span><span class="number">-10</span>T17:<span class="number">11</span>:<span class="number">31.638000</span>Z&#x27;,</span><br><span class="line">     u&#x27;edited&#x27;: u&#x27;<span class="number">2014</span><span class="number">-12</span><span class="number">-20</span>T21:<span class="number">17</span>:<span class="number">50.338000</span>Z&#x27;,</span><br><span class="line">     u&#x27;eye_color&#x27;: u&#x27;orange&#x27;,</span><br><span class="line">     u&#x27;films&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/films/1/&#x27;,</span></span><br><span class="line">      u&#x27;http:<span class="comment">//swapi.co/api/films/3/&#x27;,</span></span><br><span class="line">      u&#x27;http:<span class="comment">//swapi.co/api/films/4/&#x27;],</span></span><br><span class="line">     u&#x27;gender&#x27;: u&#x27;hermaphrodite&#x27;,</span><br><span class="line">     u&#x27;hair_color&#x27;: u&#x27;n/a&#x27;,</span><br><span class="line">     u&#x27;height&#x27;: u&#x27;<span class="number">175</span>&#x27;,</span><br><span class="line">     u&#x27;homeworld&#x27;: u&#x27;http:<span class="comment">//swapi.co/api/planets/24/&#x27;,</span></span><br><span class="line">     u&#x27;mass&#x27;: u&#x27;<span class="number">1</span>,<span class="number">358</span>&#x27;,</span><br><span class="line">     u&#x27;name&#x27;: u&#x27;Jabba Desilijic Tiure&#x27;,</span><br><span class="line">     u&#x27;skin_color&#x27;: u&#x27;green-tan, brown&#x27;,</span><br><span class="line">     u&#x27;species&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/species/5/&#x27;],</span></span><br><span class="line">     u&#x27;starships&#x27;: [],</span><br><span class="line">     u&#x27;url&#x27;: u&#x27;http:<span class="comment">//swapi.co/api/people/16/&#x27;,</span></span><br><span class="line">     u&#x27;vehicles&#x27;: []&#125;,</span><br><span class="line">    u&#x27;_type&#x27;: u&#x27;people&#x27;&#125;],</span><br><span class="line">  u&#x27;max_score&#x27;: <span class="number">1.5700331</span>,</span><br><span class="line">  u&#x27;total&#x27;: <span class="number">1</span>&#125;,</span><br><span class="line"> u&#x27;timed_out&#x27;: False,</span><br><span class="line"> u&#x27;took&#x27;: <span class="number">40</span>&#125;</span><br></pre></td></tr></table></figure>
<p>view rawes_first2.py hosted with ❤ by GitHub</p>
<h3 id="9-Next-Steps"><a href="#9-Next-Steps" class="headerlink" title="9. Next Steps"></a>9. Next Steps</h3><p>This was just a simple overview on how to set up your Elasticsearch server and start working with some data using Python. The code used here is publicly available in this IPython notebook.<br>We encourage you to learn more about ES and specially take a look at the Elastic stack where you will be able to see beautiful analytics and insights with Kibana and go through logs using Logstash.<br>In following posts we will talk about more advanced ES features and we will try to extend this simple test and use it to show a more interesting Django app powered by this data and by ES.<br>Hope this post was useful for developers trying to enter the ES world.<br>At Tryolabs we’re Elastic official partners. If you want to talk about Elasticsearch, ELK, applications and possible projects using these technologies, drop us a line to <a href="mailto:&#x68;&#101;&#108;&#x6c;&#111;&#64;&#x74;&#114;&#121;&#x6f;&#x6c;&#x61;&#x62;&#x73;&#46;&#99;&#111;&#x6d;">&#x68;&#101;&#108;&#x6c;&#111;&#64;&#x74;&#114;&#121;&#x6f;&#x6c;&#x61;&#x62;&#x73;&#46;&#99;&#111;&#x6d;</a> (or fill out this form) and we will be glad to connect!</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/31/"><i class="fa fa-angle-left" aria-label="الصفحة السابقة"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/31/">31</a><span class="page-number current">32</span><a class="page-number" href="/page/33/">33</a><span class="space">&hellip;</span><a class="page-number" href="/page/38/">38</a><a class="extend next" rel="next" href="/page/33/"><i class="fa fa-angle-right" aria-label="الصفحة التالية"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lnmput@gmail.com</span>
</div>
  <div class="powered-by">تطبيق الموقع <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
