<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico">
  <link rel="mask-icon" href="/favicon.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"swoole.app","root":"/","images":"/images","scheme":"Gemini","version":"8.7.1","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta name="description" content="要么庸俗，要么孤独">
<meta property="og:type" content="website">
<meta property="og:title" content="外贸独立站(日本)">
<meta property="og:url" content="https://swoole.app/page/32/index.html">
<meta property="og:site_name" content="外贸独立站(日本)">
<meta property="og:description" content="要么庸俗，要么孤独">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="lnmput@gmail.com">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://swoole.app/page/32/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/32/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>外贸独立站(日本)</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">外贸独立站(日本)</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">专注外贸独立站建设</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-首页"><a href="/" rel="section">首页</a></li>
        <li class="menu-item menu-item-标签"><a href="/tags" rel="section">标签</a></li>
        <li class="menu-item menu-item-读书"><a href="/read" rel="section">读书</a></li>
        <li class="menu-item menu-item-翻译"><a href="/tags/translate" rel="section">翻译</a></li>
        <li class="menu-item menu-item-关于我"><a href="/about" rel="section">关于我</a></li>
        <li class="menu-item menu-item-外贸站"><a href="/site" rel="section">外贸站</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="lnmput@gmail.com"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">lnmput@gmail.com</p>
  <div class="site-description" itemprop="description">要么庸俗，要么孤独</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">420</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">135</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://octobercms.com/" title="octobercms → https:&#x2F;&#x2F;octobercms.com&#x2F;" rel="noopener" target="_blank">octobercms</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://medium.com/" title="medium → https:&#x2F;&#x2F;medium.com&#x2F;" rel="noopener" target="_blank">medium</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/lnmput" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://swoole.app/2017/07/16/Emoj%E7%AE%80%E4%BB%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="lnmput@gmail.com">
      <meta itemprop="description" content="要么庸俗，要么孤独">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外贸独立站(日本)">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/07/16/Emoj%E7%AE%80%E4%BB%8B/" class="post-title-link" itemprop="url">Emoj简介</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2017-07-16 10:36:11 / 修改时间：11:56:52" itemprop="dateCreated datePublished" datetime="2017-07-16T10:36:11+09:00">2017-07-16</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote class="blockquote-center">
我对你仍有爱意，我对自己无能为力。
</blockquote>
早期的 Emoji 是将一些特定的符号组合替换成图片。这种方法很难标准化，能够表达的范围也有限。
2010年，Unicode 开始为 Emoji 分配码点。也就是说，现在的 Emoji 符号就是一个文字，它会被渲染为图形。

<p>Unicode 只是规定了 Emoji 的码点和含义，并没有规定它的样式。举例来说，码点U+1F600表示一张微笑的脸，但是这张脸长什么样，则由各个系统自己实现。<br>因此，当我们输入这个 Emoji 的时候，并不能保证所有用户看到的都是同一张脸。如果用户的系统没有实现这个 Emoji 符号，用户就会看到一个没有内容的方框，因为系统无法渲染这个码点。</p>
<p>Emoji 虽然是文字，但是无法书写，必须使用其他方法插入文档。</p>
<p><img src="/images/emoji.png"></p>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2017/04/emoji.html">http://www.ruanyifeng.com/blog/2017/04/emoji.html</a></p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://swoole.app/2017/07/16/mysql%E4%B8%AD%E7%9A%84%E5%AD%97%E7%AC%A6%E5%92%8C%E5%AD%97%E8%8A%82/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="lnmput@gmail.com">
      <meta itemprop="description" content="要么庸俗，要么孤独">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外贸独立站(日本)">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/07/16/mysql%E4%B8%AD%E7%9A%84%E5%AD%97%E7%AC%A6%E5%92%8C%E5%AD%97%E8%8A%82/" class="post-title-link" itemprop="url">mysql中的字符和字节</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-07-16 09:49:49" itemprop="dateCreated datePublished" datetime="2017-07-16T09:49:49+09:00">2017-07-16</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2018-04-17 18:10:22" itemprop="dateModified" datetime="2018-04-17T18:10:22+09:00">2018-04-17</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote class="blockquote-center">
只是我回首来时路的每一步都走的好孤独。
</blockquote>

<p>1.一个汉字占多少长度与编码有关：</p>
<ul>
<li>UTF－8：一个汉字＝3个字节</li>
<li>GBK：一个汉字＝2个字节</li>
</ul>
<p>2.varchar(n)表示n个字符，无论汉字和英文，MySQL都能存入n个字符，仅是实际字节长度有所区别</p>
<p>php 把一个汉字认作几个字节:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$str</span>=<span class="string">&#x27;我&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> strlen(<span class="variable">$str</span>);  <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>
<p>输出 3,UTF-8编码下, 一个汉字被认作3个字节长度.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$str</span>=<span class="string">&#x27;我&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> mb_strlen(<span class="variable">$str</span>);  <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<h3 id="整型"><a href="#整型" class="headerlink" title="整型"></a>整型</h3><h4 id="tinyint"><a href="#tinyint" class="headerlink" title="tinyint"></a>tinyint</h4><p>占用一个字节(B), 8位(b)<br>有符号: -2的7次方(-128) - +2的7次方-1(127)<br>无符号: 0 - +2的8次方-1(255)</p>
<h4 id="smallint"><a href="#smallint" class="headerlink" title="smallint"></a>smallint</h4><p>占用二个字节(B), 16位(b)<br>有符号: -2的15次方(-32768) - +2的15次方-1(32767)<br>无符号: 0 - +2的16次方-1(65535)</p>
<h4 id="mediumint"><a href="#mediumint" class="headerlink" title="mediumint"></a>mediumint</h4><p>占用三个字节(B), 24位(b)<br>有符号: -2的15次方(-32768) - +2的15次方-1(32767)<br>无符号: 0 - +2的16次方-1(65535)</p>
<h4 id="int"><a href="#int" class="headerlink" title="int"></a>int</h4><p>占用四个字节(B), 32位(b)<br>有符号: -2的31次方 - +2的31次方-1<br>无符号: 0 - +2的32次方-1</p>
<h4 id="bigint"><a href="#bigint" class="headerlink" title="bigint"></a>bigint</h4><p>占用八个字节(B), 64位(b)<br>有符号: -2的63次方 - +2的63次方-1<br>无符号: 0 - +2的64次方-1</p>
<blockquote>
<p>重要说明：我们设计表所填的位数并不会影响到他所能存储的数值的大小，但是会影响到他所填充0 的效果<br>除了无符号(UNSIGNED)类型属性， 还有一个填充零(ZEROFILL)。 就是类型后面的位宽：<br>TINYINT(M)中的 M。如果这里的 M 是 3，那么默认显示三个数字，不足在其前面用零填充。<br>并且，这里的 M 和 TINYINT 中的最大值位数毫无关系，M 设置成 5 也可以。<br>如果你直接设置 ZEROFILL 属性，那么 UNSIGNED 属性也会自动被勾选，因为填充零的<br>首要条件就是无符号。填充零只是在显示的时候查看，而 MySQL 内部存储的还是没有填充<br>的数值。在 Navicat 中，设置了 ZEROFILL 属性也看不到填充的零，为了方便查阅，但在<br>MySQL 终端和 PHP 查询中，可以看到填充零。</p>
</blockquote>
<h3 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h3><p>char(2) 和 varchar(2) 都能存储 2个汉字,或者是两个英文字符.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://swoole.app/2017/07/15/websql%E7%9A%84%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="lnmput@gmail.com">
      <meta itemprop="description" content="要么庸俗，要么孤独">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外贸独立站(日本)">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/07/15/websql%E7%9A%84%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">websql的使用</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-07-15 12:30:51" itemprop="dateCreated datePublished" datetime="2017-07-15T12:30:51+09:00">2017-07-15</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2018-03-27 22:25:05" itemprop="dateModified" datetime="2018-03-27T22:25:05+09:00">2018-03-27</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote class="blockquote-center">
白嘉轩后来引以豪壮的是一生里娶过七房女人。
——陈忠实《白鹿原》
</blockquote>

<p>需要注意的是，HTML5已经会放弃Web SQL Database 放弃的原因如下：</p>
<p>This document was on the W3C Recommendation track but specification work has stopped. The specification reached an impasse: all interested implementors have used the same SQL backend (Sqlite), but we need multiple independent implementations to proceed along a standardisation path.<br>大概意思是：<br>该文件是W3C推荐标准，但规范的制定工作已经停止。该规范陷入僵局：所有感兴趣的实现者都使用了相同的SQL后端（SQLite的），但我们需要多个独立的实现沿着规范化的路径进行。 </p>
<p>Web SQL Database 是一个运行在Html5环境下可以用Js执行CRUD的Web数据库。<br>在介绍它的使用前，先搞清几个误区： </p>
<ul>
<li>1、 webSQL是运行在浏览器环境的一个数据库，其数据持久化在客户端。所以不要试图连接自己的mySQL等真正意义上的数据库。不仅仅是权限，更多的是安全问题。 </li>
<li>2、对webSQL的修改，只是修改了了本地数据，如果要将数据持久化到远程数据库服务器，还是要走接口的。 </li>
<li>3、对于简单的数据存储，能用localStorage就，就不要再用webSQL了。除非是处理关系型数据库，这个时候用webSQL最合适不过了。</li>
</ul>
<p>在使用webSQL对数据进行增删查改之前，先介绍三个核心方法：</p>
<ul>
<li>1、openDatabase：这个方法使用现有数据库或创建新数据库创建数据库对象。</li>
<li>2、transaction：这个方法允许我们根据情况控制事务提交或回滚。 </li>
<li>3、executeSql：这个方法用于执行真实的SQL查询。</li>
</ul>
<h2 id="第一步：打开连接并创建数据库"><a href="#第一步：打开连接并创建数据库" class="headerlink" title="第一步：打开连接并创建数据库"></a>第一步：打开连接并创建数据库</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> config = &#123;  </span><br><span class="line">     <span class="attr">name</span>: <span class="string">&#x27;student&#x27;</span>,</span><br><span class="line">     <span class="attr">version</span>: <span class="string">&quot;1.0&quot;</span>,</span><br><span class="line">     <span class="attr">desc</span>: <span class="string">&#x27;学生表&#x27;</span>,</span><br><span class="line">     <span class="attr">size</span>: <span class="number">1024</span> * <span class="number">1024</span></span><br><span class="line"> &#125;;</span><br><span class="line"><span class="keyword">var</span> dataBase = <span class="built_in">window</span>.openDatabase(config.name, config.version, config.desc, config.size,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;);  </span><br><span class="line"><span class="keyword">if</span> (!dataBase) &#123;  </span><br><span class="line">    alert(<span class="string">&quot;数据库创建失败！&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    alert(<span class="string">&quot;数据库创建成功！&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>解释一下openDatabase方法打开一个已经存在的数据库，如果数据库不存在，它还可以创建数据库。几个参数意义分别是：</p>
<p>1，数据库名称。<br>2，版本号 目前为1.0(暂时不理解)<br>3，对数据库的描述。<br>4，设置数据的大小。<br>5，回调函数(可省略)。<br>初次调用时创建数据库，以后就是建立连接了。 创建的是一个sqllite数据库，完全可以用sqllite developer 打开文件，可以看到里面的数据。</p>
<h2 id="第二步：创建数据表"><a href="#第二步：创建数据表" class="headerlink" title="第二步：创建数据表"></a>第二步：创建数据表</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.createTable=<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">  dataBase.transaction( <span class="function"><span class="keyword">function</span>(<span class="params">tx</span>) </span>&#123; </span><br><span class="line">    tx.executeSql(</span><br><span class="line">        <span class="string">&quot;create table if not exists stu (id REAL UNIQUE, name TEXT)&quot;</span>, </span><br><span class="line">        [], </span><br><span class="line">        <span class="function"><span class="keyword">function</span>(<span class="params">tx,result</span>)</span>&#123; alert(<span class="string">&#x27;创建stu表成功&#x27;</span>); &#125;, </span><br><span class="line">        <span class="function"><span class="keyword">function</span>(<span class="params">tx, error</span>)</span>&#123; alert(<span class="string">&#x27;创建stu表失败:&#x27;</span> + error.message); </span><br><span class="line">    &#125;);</span><br><span class="line"> &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>executeSql函数有四个参数，其意义分别是：<br>1）表示查询的字符串，使用的SQL语言是SQLite 3.6.19。<br>2）插入到查询中问号所在处的字符串数据。<br>3）成功时执行的回调函数。返回两个参数：tx和执行的结果。<br>4）一个失败时执行的回调函数。返回两个参数：tx和失败的错误信息。</p>
<h2 id="第三步：执行增删改查"><a href="#第三步：执行增删改查" class="headerlink" title="第三步：执行增删改查"></a>第三步：执行增删改查</h2><h3 id="添加数据："><a href="#添加数据：" class="headerlink" title="添加数据："></a>添加数据：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.insert = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  </span><br><span class="line">  dataBase.transaction(<span class="function"><span class="keyword">function</span> (<span class="params">tx</span>) </span>&#123;</span><br><span class="line">            tx.executeSql(</span><br><span class="line">        <span class="string">&quot;insert  into  stu (id, name) values(?, ?)&quot;</span>,</span><br><span class="line">        [id, <span class="string">&#x27;徐明祥&#x27;</span>],</span><br><span class="line">        <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; alert(<span class="string">&#x27;添加数据成功&#x27;</span>); &#125;,</span><br><span class="line">        <span class="function"><span class="keyword">function</span> (<span class="params">tx, error</span>) </span>&#123; alert(<span class="string">&#x27;添加数据失败: &#x27;</span> + error.message); </span><br><span class="line">        &#125; );</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<h3 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.query = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  </span><br><span class="line">  dataBase.transaction(<span class="function"><span class="keyword">function</span> (<span class="params">tx</span>) </span>&#123;</span><br><span class="line">            tx.executeSql(</span><br><span class="line">        <span class="string">&quot;select  *  from  stu&quot;</span>, [],</span><br><span class="line">         <span class="function"><span class="keyword">function</span> (<span class="params">tx, result</span>) </span>&#123;  <span class="comment">//执行成功的回调函数</span></span><br><span class="line">             <span class="comment">//在这里对result 做你想要做的事情吧...........</span></span><br><span class="line">            &#125;,</span><br><span class="line">         <span class="function"><span class="keyword">function</span> (<span class="params">tx, error</span>) </span>&#123;</span><br><span class="line">            alert(<span class="string">&#x27;查询失败: &#x27;</span> + error.message);</span><br><span class="line">         &#125; );</span><br><span class="line">      &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面代码中执行成功的回调函数有一参数result。 result：查询出来的数据集。其数据类型为 SQLResultSet ，就如同C#中的DataTable。<br>SQLResultSet 的定义为： </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">interface SQLResultSet &#123; </span><br><span class="line">readonly attribute long insertId; </span><br><span class="line">readonly attribute long rowsAffected; </span><br><span class="line">readonly attribute SQLResultSetRowList rows; </span><br><span class="line">&#125;; </span><br></pre></td></tr></table></figure>
<p>其中最重要的属性—SQLResultSetRowList 类型的 rows 是数据集的“行” 。<br>rows 有两个属性：length、item 。<br>故，获取查询结果的某一行某一列的值 ：result.rows[i].item[fieldname] 。</p>
<h3 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.update = <span class="function"><span class="keyword">function</span> (<span class="params">id, name</span>) </span>&#123;  </span><br><span class="line">    dataBase.transaction(<span class="function"><span class="keyword">function</span> (<span class="params">tx</span>) </span>&#123;</span><br><span class="line">            tx.executeSql(</span><br><span class="line">        <span class="string">&quot;update  stu  set  name =  ?  where  id= ?&quot;</span>,</span><br><span class="line">        [name, id],</span><br><span class="line">         <span class="function"><span class="keyword">function</span> (<span class="params">tx, result</span>) </span>&#123;</span><br><span class="line">         &#125;,</span><br><span class="line">        <span class="function"><span class="keyword">function</span> (<span class="params">tx, error</span>) </span>&#123;</span><br><span class="line">            alert(<span class="string">&#x27;更新失败: &#x27;</span> + error.message);</span><br><span class="line">        &#125;);</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.del = <span class="function"><span class="keyword">function</span> (<span class="params">id</span>) </span>&#123;</span><br><span class="line">           dataBase.transaction(<span class="function"><span class="keyword">function</span> (<span class="params">tx</span>) </span>&#123;</span><br><span class="line">           tx.executeSql(</span><br><span class="line">       <span class="string">&quot;delete  from  stu  where  id= ?&quot;</span>,</span><br><span class="line">       [id],</span><br><span class="line">        <span class="function"><span class="keyword">function</span> (<span class="params">tx, result</span>) </span>&#123;</span><br><span class="line">        &#125;,</span><br><span class="line">       <span class="function"><span class="keyword">function</span> (<span class="params">tx, error</span>) </span>&#123;</span><br><span class="line">           alert(<span class="string">&#x27;删除失败: &#x27;</span> + error.message);</span><br><span class="line">       &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="删除数据表"><a href="#删除数据表" class="headerlink" title="删除数据表"></a>删除数据表</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.dropTable = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">             dataBase.transaction(<span class="function"><span class="keyword">function</span> (<span class="params">tx</span>) </span>&#123;</span><br><span class="line">           tx.executeSql(<span class="string">&#x27;drop  table  stu&#x27;</span>);</span><br><span class="line">       &#125;);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://swoole.app/2017/07/11/jquery%E7%9A%84%E8%BF%87%E6%BB%A4%E9%80%89%E6%8B%A9%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="lnmput@gmail.com">
      <meta itemprop="description" content="要么庸俗，要么孤独">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外贸独立站(日本)">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/07/11/jquery%E7%9A%84%E8%BF%87%E6%BB%A4%E9%80%89%E6%8B%A9%E5%99%A8/" class="post-title-link" itemprop="url">jQuery的过滤选择器</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-07-11 21:06:55" itemprop="dateCreated datePublished" datetime="2017-07-11T21:06:55+09:00">2017-07-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-11-20 11:04:06" itemprop="dateModified" datetime="2021-11-20T11:04:06+09:00">2021-11-20</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote class="blockquote-center">
永远年轻，永远热泪盈眶
</blockquote>

<h3 id="基本过滤选择器-重点掌握下列八个"><a href="#基本过滤选择器-重点掌握下列八个" class="headerlink" title="基本过滤选择器(重点掌握下列八个)"></a>基本过滤选择器(重点掌握下列八个)</h3><p>:first 选取第一个元素 $(“div:first”).css(“color”,”red”);<br>:last 选取最后一个元素 $(“div:last”).css(“color”,”red”);<br>:not 除去指定的选择器外的元素 $(“div:not”).css(“color”,”red”);<br>:even 选取索引号是偶数的元素 $(“div:even”).css(“color”,”red”);<br>:odd 选取索引号是奇数的元素 $(‘div:odd’).css(“color”,”red”);<br>:eq(index) 选取第index个元素 $(‘div:eq(5)’).css(“color”,”red”);<br>:gt(index) 选取索引号大于index的元素 $(‘div:gt(8)’).css(“color”,”red”);<br>:lt(index) 选取索引号小于index的元素$(‘div:lt(3)’).css(“color”,”red”);</p>
<h3 id="属性过滤选择器（六个必须记住）"><a href="#属性过滤选择器（六个必须记住）" class="headerlink" title="属性过滤选择器（六个必须记住）"></a>属性过滤选择器（六个必须记住）</h3><p>:[attribute] 选取拥有此属性的元素 $(‘div:[attribute]’).css(‘background-color’,’red’);<br>:[attribute=value] 选取属性值为value的元素 $(‘div:[attribute=text]’)<br>:[attribute!=value] 选取属性值不为value的元素 $(‘div:[attribute!=text]’)<br>:[attribute^=value] 选取属性值以value开始的元素 $(‘div:[attribute^=text]’)<br>:[attribute$=value] 选取属性值以value结尾的元素 $(‘div:[attribute$=text]’)<br>:[attribute*=value] 选取属性值包含value的元素 $(‘div:[attribute*=text]’)</p>
<h3 id="内容过滤选择器（四个必须记住）"><a href="#内容过滤选择器（四个必须记住）" class="headerlink" title="内容过滤选择器（四个必须记住）"></a>内容过滤选择器（四个必须记住）</h3><p>:contains 选取包含文本的text的元素 $(‘div:contains(.mini)’).css(“color”,”red”);<br>:has(id选择器名称、Class选择器名称) 选取含有选择器所匹配的元素 $(‘div:has(.mini)’).css(“color”,”red”);<br>:empty 选取不包含子元素的元素 $(‘div:empty’).css(“color”,”red”);<br>:parent 选取包含子元素的元素 $(‘div:parent’).css(“color”,”red”);</p>
<h3 id="子元素过滤选择器（记住八个）"><a href="#子元素过滤选择器（记住八个）" class="headerlink" title="子元素过滤选择器（记住八个）"></a>子元素过滤选择器（记住八个）</h3><p>:nth-child(index) 选取每个父节点下第index个元素、偶数元素或奇数元素。<br>$(‘div.one :nth-child(8)’).css(‘background-color’,’#900’);<br>:first-child 选取每个父元素下的第一个子元素 $(‘div.one :first-child(8)’).css(‘color’,’red’);<br>:last-child 选取每个父元素下的最后一个子元素 $(‘div.one :last-child(8)’).css(‘color’,’red’);<br>:only-child 选取只有一个子元素的元素 $(‘div.one :only-child(8)’).css(‘color’,’red’);<br>:enabled 选取所有可用的元素 $(‘#form1 input:enabled’).val(“vaotoo.com”);<br>:disabled 选取所有不可用的元素 $(‘#form1 input:disabled’).val(“vaotoo.com”);<br>:checked 选取所有被选中的元素(一般为（HTML中）RadioButton、CheckBox标记);<br>$(‘input:checked’).text(“vaotoo.com”);<br>:selected 选取被选中的选项元素 select下拉列表标记中的option=select</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;select:selected&#x27;</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  str += $(<span class="built_in">this</span>).text()+<span class="string">&quot;,&quot;</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="可见性过滤选择器-两个"><a href="#可见性过滤选择器-两个" class="headerlink" title="可见性过滤选择器(两个)"></a>可见性过滤选择器(两个)</h3><p>:hidden<br>:visibal</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://swoole.app/2017/06/18/%E6%80%8E%E6%A0%B7%E7%90%86%E8%A7%A3%E9%98%BB%E5%A1%9E%E9%9D%9E%E9%98%BB%E5%A1%9E%E4%B8%8E%E5%90%8C%E6%AD%A5%E5%BC%82%E6%AD%A5%E7%9A%84%E5%8C%BA%E5%88%AB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="lnmput@gmail.com">
      <meta itemprop="description" content="要么庸俗，要么孤独">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外贸独立站(日本)">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/06/18/%E6%80%8E%E6%A0%B7%E7%90%86%E8%A7%A3%E9%98%BB%E5%A1%9E%E9%9D%9E%E9%98%BB%E5%A1%9E%E4%B8%8E%E5%90%8C%E6%AD%A5%E5%BC%82%E6%AD%A5%E7%9A%84%E5%8C%BA%E5%88%AB/" class="post-title-link" itemprop="url">怎样理解阻塞非阻塞与同步异步的区别</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-06-18 10:47:12" itemprop="dateCreated datePublished" datetime="2017-06-18T10:47:12+09:00">2017-06-18</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2018-03-27 22:05:01" itemprop="dateModified" datetime="2018-03-27T22:05:01+09:00">2018-03-27</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote class="blockquote-center">
千万不要让你本来努力就能获得的东西因为懈怠而失去了机会。
</blockquote>
“阻塞”与"非阻塞"与"同步"与“异步"不能简单的从字面理解，提供一个从分布式系统角度的回答。
### 同步和异步

<p>同步与异步同步和异步关注的是消息通信机制 (synchronous communication/ asynchronous communication)所谓同步，就是在发出一个<em>调用</em>时，在没有得到结果之前，该<em>调用</em>就不返回。但是一旦调用返回，就得到返回值了。换句话说，就是由<em>调用者</em>主动等待这个<em>调用</em>的结果。而异步则是相反，<em>调用</em>在发出之后，这个调用就直接返回了，所以没有返回结果。换句话说，当一个异步过程调用发出后，调用者不会立刻得到结果。而是在<em>调用</em>发出后，<em>被调用者</em>通过状态、通知来通知调用者，或通过回调函数处理这个调用。典型的异步编程模型比如Node.js举个通俗的例子：你打电话问书店老板有没有《分布式系统》这本书，如果是同步通信机制，书店老板会说，你稍等，”我查一下”，然后开始查啊查，等查好了（可能是5秒，也可能是一天）告诉你结果（返回结果）。而异步通信机制，书店老板直接告诉你我查一下啊，查好了打电话给你，然后直接挂电话了（不返回结果）。然后查好了，他会主动打电话给你。在这里老板通过“回电”这种方式来回调。</p>
<h3 id="阻塞与非阻塞"><a href="#阻塞与非阻塞" class="headerlink" title="阻塞与非阻塞"></a>阻塞与非阻塞</h3><p>阻塞与非阻塞阻塞和非阻塞关注的是程序在等待调用结果（消息，返回值）时的状态.阻塞调用是指调用结果返回之前，当前线程会被挂起。调用线程只有在得到结果之后才会返回。非阻塞调用指在不能立刻得到结果之前，该调用不会阻塞当前线程。还是上面的例子，你打电话问书店老板有没有《分布式系统》这本书，你如果是阻塞式调用，你会一直把自己“挂起”，直到得到这本书有没有的结果，如果是非阻塞式调用，你不管老板有没有告诉你，你自己先一边去玩了， 当然你也要偶尔过几分钟check一下老板有没有返回结果。在这里阻塞与非阻塞与是否同步异步无关。跟老板通过什么方式回答你结果无关。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/19732473/answer/20851256">https://www.zhihu.com/question/19732473/answer/20851256</a></p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://swoole.app/2017/06/16/PHP%E6%89%A9%E5%B1%95%E5%92%8C%E5%8C%85%E7%9A%84%E7%AE%A1%E7%90%86PEAR-PECL-Composer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="lnmput@gmail.com">
      <meta itemprop="description" content="要么庸俗，要么孤独">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外贸独立站(日本)">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/06/16/PHP%E6%89%A9%E5%B1%95%E5%92%8C%E5%8C%85%E7%9A%84%E7%AE%A1%E7%90%86PEAR-PECL-Composer/" class="post-title-link" itemprop="url">PHP扩展和包的管理PEAR-PECL-Composer</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-06-16 10:24:18" itemprop="dateCreated datePublished" datetime="2017-06-16T10:24:18+09:00">2017-06-16</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2018-03-27 22:31:24" itemprop="dateModified" datetime="2018-03-27T22:31:24+09:00">2018-03-27</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote class="blockquote-center">
其实要说梦想的话, 我的梦想就是多赚点儿钱...
</blockquote>
扩展（Extension）一般偏底层，包（Application，Package）一般偏应用。不建议做过分的区分，在使用中能够理解和区分即可。
对于他们的管理目前有PEAR、PECL、Composer。

<h3 id="PEAR"><a href="#PEAR" class="headerlink" title="PEAR"></a>PEAR</h3><p>PEAR是PHP扩展与应用库(the PHP Extension and Application Repository)的缩写。<a target="_blank" rel="noopener" href="http://pear.php.net/">http://pear.php.net/</a><br>Bakken在1999年创立了PEAR项目，目标是试图定义一种标准，帮助开发者编写可移植、可重用的代码，避免重复发明“车轮”。代码均是PHP编写的。<br>涵盖了页面呈现、数据库访问、文件操作、数据结构、缓存操作、网络协议、WebService 等许多方面，用户可以通过下载这些类库，并适当的作一些定制以实现自己需要的功能。<br>但是随着Git、github等发展，其逐渐被Composer包管理替代。</p>
<h3 id="PECL"><a href="#PECL" class="headerlink" title="PECL"></a>PECL</h3><p>“PHP Extension Community Library”的缩写，即PHP 扩展库。<a target="_blank" rel="noopener" href="https://pecl.php.net/">https://pecl.php.net/</a><br>PECL是使用C语言开发的，通常用于补充一些用PHP难以完成的底层功能，往往需要重新编译或者在配置文件中设置后才能在用户自己的代码中使用。<br>2种使用方式：<br>命令模式，和pear的命令一致，通过man pecl显示此命令的用法<br>编译模式，即phpize</p>
<h3 id="Composer"><a href="#Composer" class="headerlink" title="Composer"></a>Composer</h3><p>PHP包管理工具，在“帮助开发者编写可移植、可重用的代码，避免重复发明“车轮””上和PEAR有相同的目标和思想，但是composer的包一般放在github、bitbucket等上，通过packagist 可以浏览上传等</p>
<h3 id="以Yaml安装使用为例"><a href="#以Yaml安装使用为例" class="headerlink" title="以Yaml安装使用为例"></a>以Yaml安装使用为例</h3><h4 id="pecl安装"><a href="#pecl安装" class="headerlink" title="pecl安装"></a>pecl安装</h4><p><a target="_blank" rel="noopener" href="http://php.net/manual/zh/install.pecl.pear.php">http://php.net/manual/zh/install.pecl.pear.php</a></p>
<p>pecl install yaml<br>这将下载 yaml 的源代码，编译之，并将 yaml.so 安装到扩展库目录 extension_dir 中。然后 yaml.so就可以通过 php.ini 加载了。</p>
<h4 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h4><p><a target="_blank" rel="noopener" href="http://php.net/manual/zh/install.pecl.phpize.php">http://php.net/manual/zh/install.pecl.phpize.php</a><br>有时候不能用 pecl 安装命令。这可能是因为在防火墙后面，或者是因为想要安装的扩展库还没有 PECL 兼容的包，例如 SVN 中尚未发布的扩展库。<br>如果要编译这种扩展库，可以用更底层的编译工具来手工进行编译。phpize 命令是用来准备 PHP 扩展库的编译环境的。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ wget https:<span class="comment">//pecl.php.net/get/yaml-1.3.0.tgz</span></span><br><span class="line">$ tar -xzvf yaml-<span class="number">1.3</span>.<span class="number">0</span>.tgz</span><br><span class="line">$ cd yaml-<span class="number">1.3</span>.<span class="number">0</span></span><br><span class="line">$ phpize</span><br><span class="line">$ ./configure</span><br><span class="line">$ make</span><br><span class="line">$ make install</span><br></pre></td></tr></table></figure>
<p>成功的安装将创建 yaml.so 并放置于 PHP 的扩展库目录 extension_dir 中。需要调整 php.ini 加入 extension=yaml.so 这一行之后才能使用此扩展库。<br>使用 phpize –help 命令可以显示此命令用法。</p>
<h4 id="composer"><a href="#composer" class="headerlink" title="composer"></a>composer</h4><p>可以参看文档 <a target="_blank" rel="noopener" href="http://www.jianshu.com/p/f0b9a319711f">http://www.jianshu.com/p/f0b9a319711f</a></p>
<p>composer require mustangostang/spyc<br>目前主流的方式，对于偏底层的扩展通过编译方式安装，对于偏应用的通过composer方式。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://www.jianshu.com/p/d8b75dbc852a">http://www.jianshu.com/p/d8b75dbc852a</a></p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://swoole.app/2017/06/15/php%E4%BD%BF%E7%94%A8fsockopen%E4%BC%A0%E9%80%81post%E5%88%B0%E5%88%AB%E7%9A%84url%E5%B9%B6%E5%8F%96%E5%BE%97%E5%9B%9E%E5%BA%94%E7%9A%84%E5%86%85%E5%AE%B9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="lnmput@gmail.com">
      <meta itemprop="description" content="要么庸俗，要么孤独">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外贸独立站(日本)">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/06/15/php%E4%BD%BF%E7%94%A8fsockopen%E4%BC%A0%E9%80%81post%E5%88%B0%E5%88%AB%E7%9A%84url%E5%B9%B6%E5%8F%96%E5%BE%97%E5%9B%9E%E5%BA%94%E7%9A%84%E5%86%85%E5%AE%B9/" class="post-title-link" itemprop="url">php使用fsockopen传送post到别的url并取得回应的内容</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-06-15 14:49:22" itemprop="dateCreated datePublished" datetime="2017-06-15T14:49:22+09:00">2017-06-15</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2018-03-27 22:32:28" itemprop="dateModified" datetime="2018-03-27T22:32:28+09:00">2018-03-27</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote class="blockquote-center">
几年前踏上火车那一刻都还没有意识到，从此故乡只有冬夏，再无春秋。
</blockquote>
如果不需要傳送參數或是使用GET method傳送

<p>可以直接使用fopen()或是file_get_contents()函式獲得回應內容<br>但是如果需要不經過表單就送出POST給某URL<br>就需要使用curl相關函式或是fsockopen()傳送</p>
<p>curl的用法比較簡單<br>可以咕狗看看(但是php必須要先安裝curl才可以用)<br>這邊要講的是fsockopen()</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接收POST參數的URL</span></span><br><span class="line"><span class="variable">$url</span> = <span class="string">&#x27;http://www.google.com&#x27;</span>;</span><br><span class="line"><span class="comment">//POST參數,在這個陣列裡,索引是name,值是value,沒有限定組數</span></span><br><span class="line"><span class="variable">$postdata</span> = <span class="keyword">array</span>(<span class="string">&#x27;post_name&#x27;</span>=&gt;<span class="string">&#x27;post_value&#x27;</span>,<span class="string">&#x27;acc&#x27;</span>=&gt;<span class="string">&#x27;hsin&#x27;</span>,<span class="string">&#x27;nick&#x27;</span>=&gt;<span class="string">&#x27;joe&#x27;</span>);</span><br><span class="line"><span class="comment">//函式回覆的值就是取得的內容</span></span><br><span class="line"><span class="variable">$result</span> = sendpost(<span class="variable">$url</span>,<span class="variable">$postdata</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sendpost</span>(<span class="params"><span class="variable">$url</span>, <span class="variable">$data</span></span>)</span>&#123;</span><br><span class="line"><span class="comment">//先解析url 取得的資訊可以看看http://www.php.net/parse_url</span></span><br><span class="line"><span class="variable">$url</span> = parse_url(<span class="variable">$url</span>);</span><br><span class="line"><span class="variable">$url_port</span> = <span class="variable">$url</span>[<span class="string">&#x27;port&#x27;</span>]==<span class="string">&#x27;&#x27;</span>?((<span class="variable">$url</span>[<span class="string">&#x27;scheme&#x27;</span>]==<span class="string">&#x27;https&#x27;</span>)?<span class="number">443</span>:<span class="number">80</span>):<span class="variable">$url</span>[<span class="string">&#x27;port&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span>(!<span class="variable">$url</span>) <span class="keyword">return</span> <span class="string">&quot;couldn&#x27;t parse url&quot;</span>;</span><br><span class="line"><span class="comment">//對要傳送的POST參數作處理</span></span><br><span class="line"><span class="variable">$encoded</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="keyword">list</span>(<span class="variable">$k</span>,<span class="variable">$v</span>)=each(<span class="variable">$data</span>))&#123;</span><br><span class="line">  <span class="variable">$encoded</span> .= (<span class="variable">$encoded</span>?<span class="string">&#x27;&amp;&#x27;</span>:<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  <span class="variable">$encoded</span> .= rawurlencode(<span class="variable">$k</span>).<span class="string">&quot;=&quot;</span>.rawurlencode(<span class="variable">$v</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//開啟一個socket</span></span><br><span class="line"><span class="variable">$fp</span> = fsockopen(<span class="variable">$url</span>[<span class="string">&#x27;host&#x27;</span>],<span class="variable">$url_port</span>);</span><br><span class="line"><span class="keyword">if</span>(!<span class="variable">$fp</span>) <span class="keyword">return</span> <span class="string">&quot;Failed to open socket to &quot;</span>.<span class="variable">$url</span>[<span class="string">&#x27;host&#x27;</span>];</span><br><span class="line"><span class="comment">//header的資訊</span></span><br><span class="line">fputs(<span class="variable">$fp</span>,<span class="string">&#x27;POST &#x27;</span>.<span class="variable">$url</span>[<span class="string">&#x27;path&#x27;</span>].(<span class="variable">$url</span>[<span class="string">&#x27;query&#x27;</span>]?<span class="string">&#x27;?&#x27;</span>.<span class="variable">$url</span>[<span class="string">&#x27;query&#x27;</span>]:<span class="string">&#x27;&#x27;</span>).<span class="string">&quot; HTTP/1.0rn&quot;</span>);</span><br><span class="line">fputs(<span class="variable">$fp</span>,<span class="string">&quot;Host: &quot;</span>.<span class="variable">$url</span>[<span class="string">&#x27;host&#x27;</span>].<span class="string">&quot;n&quot;</span>);</span><br><span class="line">fputs(<span class="variable">$fp</span>,<span class="string">&quot;Content-type: application/x-www-form-urlencodedn&quot;</span>);</span><br><span class="line">fputs(<span class="variable">$fp</span>,<span class="string">&quot;Content-length: &quot;</span>.strlen(<span class="variable">$encoded</span>).<span class="string">&quot;n&quot;</span>);</span><br><span class="line">fputs(<span class="variable">$fp</span>,<span class="string">&quot;Connection: closenn&quot;</span>);</span><br><span class="line">fputs(<span class="variable">$fp</span>,<span class="variable">$encoded</span>.<span class="string">&quot;n&quot;</span>);</span><br><span class="line"><span class="comment">//取得回應的內容</span></span><br><span class="line"><span class="variable">$line</span> = fgets(<span class="variable">$fp</span>,<span class="number">1024</span>);</span><br><span class="line"><span class="keyword">if</span>(!eregi(<span class="string">&quot;^HTTP/1.. 200&quot;</span>, <span class="variable">$line</span>)) <span class="keyword">return</span>;</span><br><span class="line"><span class="variable">$results</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="variable">$inheader</span> = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(!feof(<span class="variable">$fp</span>))&#123;</span><br><span class="line">  <span class="variable">$line</span> = fgets(<span class="variable">$fp</span>,<span class="number">2048</span>);</span><br><span class="line">  <span class="keyword">if</span>(<span class="variable">$inheader</span>&amp;&amp;(<span class="variable">$line</span> == <span class="string">&quot;n&quot;</span> || <span class="variable">$line</span> == <span class="string">&quot;rn&quot;</span>))&#123;</span><br><span class="line">    <span class="variable">$inheader</span> = <span class="number">0</span>;</span><br><span class="line">  &#125;<span class="keyword">elseif</span>(!<span class="variable">$inheader</span>)&#123;</span><br><span class="line">    <span class="variable">$results</span> .= <span class="variable">$line</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">fclose(<span class="variable">$fp</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="variable">$results</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://inspiregate.com/programming/php/26-php-to-use-fsockopen-to-send-post-to-another-url-and-get-to-respond-to-the-content.html">http://inspiregate.com/programming/php/26-php-to-use-fsockopen-to-send-post-to-another-url-and-get-to-respond-to-the-content.html</a></p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://swoole.app/2017/06/13/php%E4%B8%AD-POST%E5%92%8Cphp-input%E7%9A%84%E5%8C%BA%E5%88%AB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="lnmput@gmail.com">
      <meta itemprop="description" content="要么庸俗，要么孤独">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外贸独立站(日本)">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/06/13/php%E4%B8%AD-POST%E5%92%8Cphp-input%E7%9A%84%E5%8C%BA%E5%88%AB/" class="post-title-link" itemprop="url">php中$_POST和php://input的区别</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-06-13 14:45:11" itemprop="dateCreated datePublished" datetime="2017-06-13T14:45:11+09:00">2017-06-13</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2018-04-02 10:10:56" itemprop="dateModified" datetime="2018-04-02T10:10:56+09:00">2018-04-02</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote class="blockquote-center">
你考95分是因为你的实力只有95分。我考一百分是因为这个卷子只有100分。
</blockquote>

<h3 id="POST"><a href="#POST" class="headerlink" title="$_POST"></a>$_POST</h3><p><code>$_POST</code> 是获取表单 <code>POST</code> 过来数据（body部分）的最常用方法，上传的文件信息使用 <code>$_FILES</code> 获取。</p>
<h3 id="php-input"><a href="#php-input" class="headerlink" title="php://input"></a>php://input</h3><p>可以读取没有处理过的POST数据。<br>相较于$HTTP_RAW_POST_DATA而言，它给内存带来的压力较小，并且不需要特殊的php.ini设置。<br>php://input不能用于enctype=multipart/form-data</p>
<p>由于 php://input 只是数据流，我们可以使用 <code>file_get_contents()</code> 函数去获取它的内容：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$post_data</span> = file_get_contents(<span class="string">&#x27;php://input&#x27;</span>);</span><br><span class="line">print_r(<span class="variable">$post_data</span>);</span><br></pre></td></tr></table></figure>
<p>获取到的内容和 <code>$HTTP_RAW_POST_DATA</code> 是一样的。</p>
<h3 id="原始数据"><a href="#原始数据" class="headerlink" title="原始数据"></a>原始数据</h3><p>当浏览器从表单发送 POST 请求的时候，默认的 media type 是 “application/x-www-form-urlencoded”，意思就是字段名和值都编码了，每个 key-value 对使用 ‘&amp;’ 字符分隔开，key 和 value 使用 ‘=’ 分开，并且 key 和 value 中的空格都会被替换成 + ，其他特殊字符都会被使用 urlencode 方式进行编码。<br>比如下面的 key-value 对：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name: Jonathan Doe</span><br><span class="line">age: <span class="number">23</span></span><br><span class="line">formula: a + b == <span class="number">13</span>%!</span><br></pre></td></tr></table></figure>
<p>会被编码下面的原始数据：<br><code>name=Jonathan+Doe&amp;age=23&amp;formula=a+%2B+b+%3D%3D+13%25%21</code><br>PHP 会解析这些原始的 POST 数据，并且格式化成数组，填充到 $_POST 中：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">    [name] =&gt; Jonathan Doe</span><br><span class="line">    [age] =&gt; <span class="number">23</span></span><br><span class="line">    [formula] =&gt; a + b == <span class="number">13</span>%!</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>很多时候，接收到不是网页 POST 过来的数据，而是可能通过其他方式 POST 过来的 “text/xml” 格式的数据，这些内容无法解析成 $_POST 数组，这个时候我们就需要原始的 POST 数据进行处理。</p>
<h3 id="重要"><a href="#重要" class="headerlink" title="重要"></a>重要</h3><p>PHP 7 已经取消了 $HTTP_RAW_POST_DATA，请用 php://input 代替。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://swoole.app/2017/06/11/PHP-MySQL%E6%8C%81%E4%B9%85%E8%BF%9E%E6%8E%A5-mysql-pconnect/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="lnmput@gmail.com">
      <meta itemprop="description" content="要么庸俗，要么孤独">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外贸独立站(日本)">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/06/11/PHP-MySQL%E6%8C%81%E4%B9%85%E8%BF%9E%E6%8E%A5-mysql-pconnect/" class="post-title-link" itemprop="url">PHP-MySQL持久连接-mysql_pconnect</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-06-11 11:12:05" itemprop="dateCreated datePublished" datetime="2017-06-11T11:12:05+09:00">2017-06-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2018-03-27 21:54:57" itemprop="dateModified" datetime="2018-03-27T21:54:57+09:00">2018-03-27</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote class="blockquote-center">
别人说你变了，是因为你没有按照他的想法活罢了。。。 
</blockquote>
先来一段 PHP 连接 MySQL 的经典代码：
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$con</span> = mysql_connect(<span class="string">&quot;localhost&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (!<span class="variable">$con</span>) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&quot;Could not connect: &quot;</span> . mysql_error());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// some code</span></span><br><span class="line">mysql_close(<span class="variable">$con</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
### mysql_pconnect
首先，当连接的时候本函数将先尝试寻找一个在同一个主机上用同样的用户名和密码已经打开的（持久）连接，如果找到，则返回此连接标识而不打开新连接。

<p>其次，当脚本执行完毕后到 SQL 服务器的连接不会被关闭，此连接将保持打开以备以后使用（mysql_close() 不会关闭由 mysql_pconnect() 建立的连接）。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// pconnect.php</span></span><br><span class="line"><span class="variable">$con</span> = mysql_pconnect(<span class="string">&quot;localhost&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line"><span class="comment">// connect.php</span></span><br><span class="line"><span class="comment">// $con = mysql_connect(&quot;localhost&quot;,&quot;root&quot;,&quot;123456&quot;);</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="variable">$con</span>) &#123;</span><br><span class="line">  <span class="keyword">die</span>(<span class="string">&#x27;Could not connect: &#x27;</span> . mysql_error());</span><br><span class="line">&#125;</span><br><span class="line">sleep(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<p>注意，此种连接仅能用于模块版本的 PHP。(我用的是 Nginx+PHP-FPM 模式，而非 Apache+php_module 模式。 )</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://swoole.app/2017/06/11/PHP%E9%AD%94%E6%9C%AF%E5%87%BD%E6%95%B0%E4%B9%8B-sleep%E5%92%8C-wakeup/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="lnmput@gmail.com">
      <meta itemprop="description" content="要么庸俗，要么孤独">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="外贸独立站(日本)">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/06/11/PHP%E9%AD%94%E6%9C%AF%E5%87%BD%E6%95%B0%E4%B9%8B-sleep%E5%92%8C-wakeup/" class="post-title-link" itemprop="url">PHP魔术函数之__sleep和__wakeup</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2017-06-11 10:25:53 / 修改时间：11:28:57" itemprop="dateCreated datePublished" datetime="2017-06-11T10:25:53+09:00">2017-06-11</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote class="blockquote-center">
最重要的东西,用眼睛是看不见的。
</blockquote>
在PHP5中有两个魔术方法__sleep()方法和__wakeup()方法，在对象串行化的时候，会调用一个__sleep()方法来完成一 些睡前的事情；而在重新醒来，即由二进制串重新组成一个对象的时候，则会自动调用PHP的另一个函数__wakeup()，做一些对象醒来就要做的动作。

<p>__sleep()函数不接受任何参数， 但返回一个数组，其中包含需要串行化的属性。末被包含的属性将在串行化时被忽略，如果没有__sleep()方法，PHP将保存所有属性。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">//下面是人的成员属性</span></span><br><span class="line">    <span class="keyword">var</span> <span class="variable">$name</span>;  <span class="comment">//人的名子</span></span><br><span class="line">    <span class="keyword">var</span> <span class="variable">$sex</span>;   <span class="comment">//人的性别</span></span><br><span class="line">    <span class="keyword">var</span> <span class="variable">$age</span>;   <span class="comment">//人的年龄</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义一个构造方法参数为属性姓名$name、性别$sex和年龄$age进行赋值</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$name</span> = <span class="string">&quot;&quot;</span>, <span class="variable">$sex</span> = <span class="string">&quot;&quot;</span>, <span class="variable">$age</span> = <span class="string">&quot;&quot;</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">$this</span>-&gt;name = <span class="variable">$name</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;sex = <span class="variable">$sex</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;age = <span class="variable">$age</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//这个人可以说话的方法, 说出自己的属性</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">say</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;我的名子叫：&quot;</span> . <span class="keyword">$this</span>-&gt;name . <span class="string">&quot; 性别：&quot;</span> . <span class="keyword">$this</span>-&gt;sex . <span class="string">&quot; 我的年龄是：&quot;</span> . <span class="keyword">$this</span>-&gt;age . <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__sleep</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> Implement __sleep() method.</span></span><br><span class="line">        <span class="variable">$arr</span> = <span class="keyword">array</span>(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;age&quot;</span>); <span class="comment">// 此时，属性$sex将被删除！！！</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$arr</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__wakeup</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> Implement __wakeup() method.</span></span><br><span class="line">        <span class="keyword">$this</span>-&gt;age = <span class="number">40</span>;  <span class="comment">//重新生成对象时，并重新赋值$age为40</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$p1</span> = <span class="keyword">new</span> Person(<span class="string">&quot;张三&quot;</span>, <span class="string">&quot;男&quot;</span>, <span class="number">20</span>);</span><br><span class="line"><span class="variable">$p1_string</span> = serialize(<span class="variable">$p1</span>);    <span class="comment">//把一个对象串行化，返一个字符串</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$p1_string</span> . <span class="string">&quot;&lt;br&gt;&quot;</span>;     <span class="comment">//串行化的字符串我们通常不去解析</span></span><br><span class="line"><span class="variable">$p2</span> = unserialize(<span class="variable">$p1_string</span>);  <span class="comment">//把一个串行化的字符串反串行化形成对象$p2</span></span><br><span class="line"><span class="variable">$p2</span>-&gt;say();</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/31/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/31/">31</a><span class="page-number current">32</span><a class="page-number" href="/page/33/">33</a><span class="space">&hellip;</span><a class="page-number" href="/page/42/">42</a><a class="extend next" rel="next" href="/page/33/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lnmput@gmail.com</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
