<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico">
  <link rel="mask-icon" href="/favicon.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"swoole.app","root":"/","images":"/images","scheme":"Gemini","version":"8.7.1","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta name="description" content="和你们这些少爷不同，我们光是活着就竭尽全力了。  Lately, here at Tryolabs, we started gaining interest in big data and search related platforms which are giving us excellent resources to create our complex web applications.">
<meta property="og:type" content="article">
<meta property="og:title" content="使用python操作elasticsearch">
<meta property="og:url" content="https://swoole.app/2016/12/13/%E4%BD%BF%E7%94%A8python%E6%93%8D%E4%BD%9Celasticsearch/index.html">
<meta property="og:site_name" content="杨子鳄鱼 ● 外贸自建站">
<meta property="og:description" content="和你们这些少爷不同，我们光是活着就竭尽全力了。  Lately, here at Tryolabs, we started gaining interest in big data and search related platforms which are giving us excellent resources to create our complex web applications.">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2016-12-13T01:19:01.000Z">
<meta property="article:modified_time" content="2018-03-27T13:37:10.000Z">
<meta property="article:author" content="lnmput@gmail.com">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="Elasticsearch">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://swoole.app/2016/12/13/%E4%BD%BF%E7%94%A8python%E6%93%8D%E4%BD%9Celasticsearch/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://swoole.app/2016/12/13/%E4%BD%BF%E7%94%A8python%E6%93%8D%E4%BD%9Celasticsearch/","path":"2016/12/13/使用python操作elasticsearch/","title":"使用python操作elasticsearch"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>使用python操作elasticsearch | 杨子鳄鱼 ● 外贸自建站</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">杨子鳄鱼 ● 外贸自建站</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">十年外贸建站经验，专注外贸独立站建设</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-首页"><a href="/" rel="section">首页</a></li>
        <li class="menu-item menu-item-标签"><a href="/tags" rel="section">标签</a></li>
        <li class="menu-item menu-item-读书"><a href="/read" rel="section">读书</a></li>
        <li class="menu-item menu-item-翻译"><a href="/tags/translate" rel="section">翻译</a></li>
        <li class="menu-item menu-item-关于我"><a href="/about" rel="section">关于我</a></li>
        <li class="menu-item menu-item-外贸站"><a href="/site" rel="section">外贸站</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Yeah-but-what-IS-Elasticsearch"><span class="nav-number">1.</span> <span class="nav-text">2. Yeah, but what IS Elasticsearch?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-How-does-it-work"><span class="nav-number">2.</span> <span class="nav-text">3. How does it work?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Should-I-use-ES"><span class="nav-number">3.</span> <span class="nav-text">4. Should I use ES?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Easy-first-steps-with-ES"><span class="nav-number">4.</span> <span class="nav-text">5. Easy first steps with ES</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-Let%E2%80%99s-Pythonize-this-thing"><span class="nav-number">5.</span> <span class="nav-text">6. Let’s Pythonize this thing!</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-Let%E2%80%99s-add-some-public-data-to-our-cluster"><span class="nav-number">6.</span> <span class="nav-text">7. Let’s add some public data to our cluster</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#make-sure-ES-is-up-and-running"><span class="nav-number"></span> <span class="nav-text">make sure ES is up and running</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#8-Now-let%E2%80%99s-try-an-interesting-search"><span class="nav-number">1.</span> <span class="nav-text">8. Now, let’s try an interesting search</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-Next-Steps"><span class="nav-number">2.</span> <span class="nav-text">9. Next Steps</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="lnmput@gmail.com"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">lnmput@gmail.com</p>
  <div class="site-description" itemprop="description">要么庸俗，要么孤独</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">389</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">134</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="http://www.laruence.com/" title="风雪之隅 → http:&#x2F;&#x2F;www.laruence.com&#x2F;" rel="noopener" target="_blank">风雪之隅</a>
      </span>
      <span class="links-of-author-item">
        <a href="http://tech.youzan.com/" title="有赞技术团队 → http:&#x2F;&#x2F;tech.youzan.com&#x2F;" rel="noopener" target="_blank">有赞技术团队</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://tech.meituan.com/archives" title="美团点评技术团队 → https:&#x2F;&#x2F;tech.meituan.com&#x2F;archives" rel="noopener" target="_blank">美团点评技术团队</a>
      </span>
      <span class="links-of-author-item">
        <a href="http://macshuo.com/" title="點燈坊 → http:&#x2F;&#x2F;macshuo.com&#x2F;" rel="noopener" target="_blank">點燈坊</a>
      </span>
      <span class="links-of-author-item">
        <a href="http://blog.turn.tw/" title="轉個彎日誌 → http:&#x2F;&#x2F;blog.turn.tw&#x2F;" rel="noopener" target="_blank">轉個彎日誌</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/lnmput" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://swoole.app/2016/12/13/%E4%BD%BF%E7%94%A8python%E6%93%8D%E4%BD%9Celasticsearch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="lnmput@gmail.com">
      <meta itemprop="description" content="要么庸俗，要么孤独">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨子鳄鱼 ● 外贸自建站">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          使用python操作elasticsearch
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2016-12-13 10:19:01" itemprop="dateCreated datePublished" datetime="2016-12-13T10:19:01+09:00">2016-12-13</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2018-03-27 22:37:10" itemprop="dateModified" datetime="2018-03-27T22:37:10+09:00">2018-03-27</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <blockquote class="blockquote-center">
和你们这些少爷不同，我们光是活着就竭尽全力了。
</blockquote>
Lately, here at Tryolabs, we started gaining interest in big data and search related platforms which are giving us excellent resources to create our complex web applications. One of them is Elasticsearch.
Elastic{ON}15, the first ES conference is coming, and since nowadays we see a lot of interest in this technology, we are taking the opportunity to give an introduction and a simple example for Python developers out there that want to begin using it or give it a try.
### 1. What is Elasticsearch?

<p>Elasticsearch is a distributed, real-time, search and analytics platform.</p>
<h3 id="2-Yeah-but-what-IS-Elasticsearch"><a href="#2-Yeah-but-what-IS-Elasticsearch" class="headerlink" title="2. Yeah, but what IS Elasticsearch?"></a>2. Yeah, but what IS Elasticsearch?</h3><p>Good question! In the previous definition you can see all these hype-sounding tech terms (distributed, real-time, analytics), so let’s try to explain.<br>ES is distributed, it organizes information in clusters of nodes, so it will run in multiple servers if we intend it to.<br>ES is real-time, since data is indexed, we get responses to our queries super fast!<br>And last but not least, it does searches and analytics. The main problem we are solving with this tool is exploring our data!<br>A platform like ES is the foundation for any respectable search engine.</p>
<h3 id="3-How-does-it-work"><a href="#3-How-does-it-work" class="headerlink" title="3. How does it work?"></a>3. How does it work?</h3><p>Using a restful API, Elasticsearch saves data and indexes it automatically. It assigns types to fields and that way a search can be done smartly and quickly using filters and different queries.<br>It’s uses JVM in order to be as fast as possible. It distributes indexes in “shards” of data. It replicates shards in different nodes, so it’s distributed and clusters can function even if not all nodes are operational. Adding nodes is super easy and that’s what makes it so scalable.<br>ES uses Lucene to solve searches. This is quite an advantage with comparing with, for example, Django query strings. A restful API call allows us to perform searches using json objects as parameters, making it much more flexible and giving each search parameter within the object a different weight, importance and or priority.<br>The final result ranks objects that comply with the search query requirements. You could even use synonyms, autocompletes, spell suggestions and correct typos. While the usual query strings provides results that follow certain logic rules, ES queries give you a ranked list of results that may fall in different criteria and its order depend on how they comply with a certain rule or filter.<br>ES can also provide answers for data analysis, like averages, how many unique terms and or statistics. This could be done using aggregations. To dig a little deeper in this feature check the documentation here.</p>
<h3 id="4-Should-I-use-ES"><a href="#4-Should-I-use-ES" class="headerlink" title="4. Should I use ES?"></a>4. Should I use ES?</h3><p>The main point is scalability and getting results and insights very fast. In most cases using Lucene could be enough to have all you need.<br>It seems sometimes that these tools are designed for projects with tons of data and are distributed in order to handle tons of users. Startups dream of growing to that scenario, but may start thinking small first to build a prototype and then when the data is there, start thinking about scaling problems.<br>Does it make sense and pays off to be prepared to grow A LOT? Why not? Elasticsearch has no drawback and is easy to use, so it’s just a decision of using it to be prepared for the future.<br>I’m going to give you a quick example of a dead simple project using Elasticsearch to quickly and beautifully search for some example data. It will be quick to do, Python powered and ready to scale in case we need it to, so, best of both worlds.</p>
<h3 id="5-Easy-first-steps-with-ES"><a href="#5-Easy-first-steps-with-ES" class="headerlink" title="5. Easy first steps with ES"></a>5. Easy first steps with ES</h3><p>For the following part it would be nice to be familiarized with concepts like Cluster, Node, Document, Index. Take a look at the official guide if you have doubts.<br>First things first, get ES from here.<br>I followed this video tutorial to get things started in just a minute. I recommend all you to check it out later.<br>Once you downloaded ES, it’s as simple as running bin/elasticsearch and you will have your ES cluster with one node running! You can interact with it at <a target="_blank" rel="noopener" href="http://localhost:9200/">http://localhost:9200/</a><br>If you hit it you will get something like this:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;status&quot;</span> : <span class="number">200</span>,</span><br><span class="line">  <span class="attr">&quot;name&quot;</span> : <span class="string">&quot;Delphine Courtney&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;cluster_name&quot;</span> : <span class="string">&quot;elasticsearch&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;version&quot;</span> : &#123;</span><br><span class="line">    <span class="attr">&quot;number&quot;</span> : <span class="string">&quot;1.4.2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;build_hash&quot;</span> : <span class="string">&quot;927caff6f05403e936c20bf4529f144f0c89fd8c&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;build_timestamp&quot;</span> : <span class="string">&quot;2014-12-16T14:11:12Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;build_snapshot&quot;</span> : <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">&quot;lucene_version&quot;</span> : <span class="string">&quot;4.10.2&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;tagline&quot;</span> : <span class="string">&quot;You Know, for Search&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>view rawes_first.json hosted with ❤ by GitHub<br>Creating another node is as simple as:<br>bin/elasticsearch -Des.node.name=Node-2<br>It automatically detects the old node as its master and joins our cluster. By default we will be able to communicate with this new node using the 9201 port <a target="_blank" rel="noopener" href="http://localhost:9201/">http://localhost:9201</a>. Now we can talk with each node and receive the same data, they are supposed to be identical.</p>
<h3 id="6-Let’s-Pythonize-this-thing"><a href="#6-Let’s-Pythonize-this-thing" class="headerlink" title="6. Let’s Pythonize this thing!"></a>6. Let’s Pythonize this thing!</h3><p>To use ES with our all time favorite language; Python, it gets easier if we install elasticsearch-py package.<br>pip install elasticsearch<br>Now we will be able to use this package to index and search data using Python.</p>
<h3 id="7-Let’s-add-some-public-data-to-our-cluster"><a href="#7-Let’s-add-some-public-data-to-our-cluster" class="headerlink" title="7. Let’s add some public data to our cluster"></a>7. Let’s add some public data to our cluster</h3><p>So, I wanted to make this project a “real world example”, I really did, but after I found out there is a star wars API (<a target="_blank" rel="noopener" href="http://swapi.co/">http://swapi.co/</a>), I couldn’t resist it and ended up being a fictional -  ”galaxy far far away” example.  The API is dead simple to use, so we will get some data from there.<br>I’m using an IPython Notebook to do this test, I started with the sample request to make sure we can hit the ES server.</p>
<h1 id="make-sure-ES-is-up-and-running"><a href="#make-sure-ES-is-up-and-running" class="headerlink" title="make sure ES is up and running"></a>make sure ES is up and running</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">res = requests.get(<span class="string">&#x27;http://localhost:9200&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(res.content)</span><br></pre></td></tr></table></figure>
<p>view rawes_first.py hosted with ❤ by GitHub<br>Then we connect to our ES server using Python and the elasticsearch-py library:<br>#connect to our cluster</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> elasticsearch <span class="keyword">import</span> Elasticsearch</span><br><span class="line">es = Elasticsearch([&#123;<span class="string">&#x27;host&#x27;</span>: <span class="string">&#x27;localhost&#x27;</span>, <span class="string">&#x27;port&#x27;</span>: <span class="number">9200</span>&#125;])</span><br></pre></td></tr></table></figure>
<p>view rawes_first3.py hosted with ❤ by GitHub<br>I added some data to test, and then deleted it. I’m skipping that part for this guide, but you can check it out in the notebook.<br>Now, using The Force, we connect to the Star Wars API and index some fictional people.<br>#let’s iterate over swapi people documents and index them</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line">r = requests.get(<span class="string">&#x27;http://localhost:9200&#x27;</span>) </span><br><span class="line">i = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> r.status_code == <span class="number">200</span>:</span><br><span class="line">    r = requests.get(<span class="string">&#x27;http://swapi.co/api/people/&#x27;</span>+ <span class="built_in">str</span>(i))</span><br><span class="line">    es.index(index=<span class="string">&#x27;sw&#x27;</span>, doc_type=<span class="string">&#x27;people&#x27;</span>, <span class="built_in">id</span>=i, body=json.loads(r.content))</span><br><span class="line">    i=i+<span class="number">1</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure>
<p>view rawes_first4.py hosted with ❤ by GitHub<br>Please, notice that we automatically created an index “sw” and a “doc_type” with de indexing command. We get 17 responses from swapi and index them with ES. I’m sure there are much more “people” in the swapi DB, but it seems we are getting a 404 with <a target="_blank" rel="noopener" href="http://swapi.co/api/people/17">http://swapi.co/api/people/17</a>. Bug report here! :-)<br>Anyway, to see if all worked with this few results, we try to get the document with id=5.<br>es.get(index=’sw’, doc_type=’people’, id=5)<br>view rawes_first10.py hosted with ❤ by GitHub<br>We will get Princess Leia:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;u&#x27;_id&#x27;: u&#x27;<span class="number">5</span>&#x27;,</span><br><span class="line"> u&#x27;_index&#x27;: u&#x27;sw&#x27;,</span><br><span class="line"> u&#x27;_source&#x27;: &#123;u&#x27;birth_year&#x27;: u&#x27;<span class="number">19</span>BBY&#x27;,</span><br><span class="line">  u&#x27;created&#x27;: u&#x27;<span class="number">2014</span><span class="number">-12</span><span class="number">-10</span>T15:<span class="number">20</span>:<span class="number">09.791000</span>Z&#x27;,</span><br><span class="line">  u&#x27;edited&#x27;: u&#x27;<span class="number">2014</span><span class="number">-12</span><span class="number">-20</span>T21:<span class="number">17</span>:<span class="number">50.315000</span>Z&#x27;,</span><br><span class="line">  u&#x27;eye_color&#x27;: u&#x27;brown&#x27;,</span><br><span class="line">  u&#x27;films&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/films/1/&#x27;,</span></span><br><span class="line">   u&#x27;http:<span class="comment">//swapi.co/api/films/2/&#x27;,</span></span><br><span class="line">   u&#x27;http:<span class="comment">//swapi.co/api/films/3/&#x27;,</span></span><br><span class="line">   u&#x27;http:<span class="comment">//swapi.co/api/films/6/&#x27;],</span></span><br><span class="line">  u&#x27;gender&#x27;: u&#x27;female&#x27;,</span><br><span class="line">  u&#x27;hair_color&#x27;: u&#x27;brown&#x27;,</span><br><span class="line">  u&#x27;height&#x27;: u&#x27;<span class="number">150</span>&#x27;,</span><br><span class="line">  u&#x27;homeworld&#x27;: u&#x27;http:<span class="comment">//swapi.co/api/planets/2/&#x27;,</span></span><br><span class="line">  u&#x27;mass&#x27;: u&#x27;<span class="number">49</span>&#x27;,</span><br><span class="line">  u&#x27;name&#x27;: u&#x27;Leia Organa&#x27;,</span><br><span class="line">  u&#x27;skin_color&#x27;: u&#x27;light&#x27;,</span><br><span class="line">  u&#x27;species&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/species/1/&#x27;],</span></span><br><span class="line">  u&#x27;starships&#x27;: [],</span><br><span class="line">  u&#x27;url&#x27;: u&#x27;http:<span class="comment">//swapi.co/api/people/5/&#x27;,</span></span><br><span class="line">  u&#x27;vehicles&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/vehicles/30/&#x27;]&#125;,</span></span><br><span class="line"> u&#x27;_type&#x27;: u&#x27;people&#x27;,</span><br><span class="line"> u&#x27;_version&#x27;: <span class="number">1</span>,</span><br><span class="line"> u&#x27;found&#x27;: True&#125;</span><br></pre></td></tr></table></figure>
<p>view rawes_first5.py hosted with ❤ by GitHub<br>Now, let’s add more data, this time using node 2! And let’s start at the 18th person, where we stopped.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">r = requests.get(<span class="string">&#x27;http://localhost:9201&#x27;</span>)</span><br><span class="line">i = <span class="number">18</span></span><br><span class="line"><span class="keyword">while</span> r.status_code == <span class="number">200</span>:</span><br><span class="line">   r = requests.get(<span class="string">&#x27;http://swapi.co/api/people/&#x27;</span>+ <span class="built_in">str</span>(i))</span><br><span class="line">   es.index(index=<span class="string">&#x27;sw&#x27;</span>, doc_type=<span class="string">&#x27;people&#x27;</span>, <span class="built_in">id</span>=i,     body=json.loads(r.content))</span><br><span class="line">   i=i+<span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>view rawes_first6.py hosted with ❤ by GitHub<br>We got the rest of the characters just fine.</p>
<h3 id="8-Now-let’s-try-an-interesting-search"><a href="#8-Now-let’s-try-an-interesting-search" class="headerlink" title="8. Now, let’s try an interesting search"></a>8. Now, let’s try an interesting search</h3><p>Where is Darth Vader? Here is our search query:<br>es.search(index=”sw”, body={“query”: {“match”: {‘name’:’Darth Vader’}}})<br>view rawes_first7.py hosted with ❤ by GitHub<br>This will give us both Darth Vader AND Darth Maul. Id 4 and id 44 (notice that they are in the same index, even if we use different node client call the index command). Both results have a score, although Darth Vader is much higher than Darth Maul (2.77 vs 0.60) since Vader is a exact match. Take that Darth Maul!</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&#123;u&#x27;_shards&#x27;: &#123;u&#x27;failed&#x27;: <span class="number">0</span>, u&#x27;successful&#x27;: <span class="number">5</span>, u&#x27;total&#x27;: <span class="number">5</span>&#125;,</span><br><span class="line"> u&#x27;hits&#x27;: &#123;u&#x27;hits&#x27;: [&#123;u&#x27;_id&#x27;: u&#x27;<span class="number">4</span>&#x27;,</span><br><span class="line">    u&#x27;_index&#x27;: u&#x27;sw&#x27;,</span><br><span class="line">    u&#x27;_score&#x27;: <span class="number">2.7754524</span>,</span><br><span class="line">    u&#x27;_source&#x27;: &#123;u&#x27;birth_year&#x27;: u&#x27;<span class="number">41.9</span>BBY&#x27;,</span><br><span class="line">     u&#x27;created&#x27;: u&#x27;<span class="number">2014</span><span class="number">-12</span><span class="number">-10</span>T15:<span class="number">18</span>:<span class="number">20.704000</span>Z&#x27;,</span><br><span class="line">     u&#x27;edited&#x27;: u&#x27;<span class="number">2014</span><span class="number">-12</span><span class="number">-20</span>T21:<span class="number">17</span>:<span class="number">50.313000</span>Z&#x27;,</span><br><span class="line">     u&#x27;eye_color&#x27;: u&#x27;yellow&#x27;,</span><br><span class="line">     u&#x27;films&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/films/1/&#x27;,</span></span><br><span class="line">      u&#x27;http:<span class="comment">//swapi.co/api/films/2/&#x27;,</span></span><br><span class="line">      u&#x27;http:<span class="comment">//swapi.co/api/films/3/&#x27;,</span></span><br><span class="line">      u&#x27;http:<span class="comment">//swapi.co/api/films/6/&#x27;],</span></span><br><span class="line">     u&#x27;gender&#x27;: u&#x27;male&#x27;,</span><br><span class="line">     u&#x27;hair_color&#x27;: u&#x27;none&#x27;,</span><br><span class="line">     u&#x27;height&#x27;: u&#x27;<span class="number">202</span>&#x27;,</span><br><span class="line">     u&#x27;homeworld&#x27;: u&#x27;http:<span class="comment">//swapi.co/api/planets/1/&#x27;,</span></span><br><span class="line">     u&#x27;mass&#x27;: u&#x27;<span class="number">136</span>&#x27;,</span><br><span class="line">     u&#x27;name&#x27;: u&#x27;Darth Vader&#x27;,</span><br><span class="line">     u&#x27;skin_color&#x27;: u&#x27;white&#x27;,</span><br><span class="line">     u&#x27;species&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/species/1/&#x27;],</span></span><br><span class="line">     u&#x27;starships&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/starships/13/&#x27;],</span></span><br><span class="line">     u&#x27;url&#x27;: u&#x27;http:<span class="comment">//swapi.co/api/people/4/&#x27;,</span></span><br><span class="line">     u&#x27;vehicles&#x27;: []&#125;,</span><br><span class="line">    u&#x27;_type&#x27;: u&#x27;people&#x27;&#125;,</span><br><span class="line">   &#123;u&#x27;_id&#x27;: u&#x27;<span class="number">44</span>&#x27;,</span><br><span class="line">    u&#x27;_index&#x27;: u&#x27;sw&#x27;,</span><br><span class="line">    u&#x27;_score&#x27;: <span class="number">0.6085256</span>,</span><br><span class="line">    u&#x27;_source&#x27;: &#123;u&#x27;birth_year&#x27;: u&#x27;<span class="number">54</span>BBY&#x27;,</span><br><span class="line">     u&#x27;created&#x27;: u&#x27;<span class="number">2014</span><span class="number">-12</span><span class="number">-19</span>T18:<span class="number">00</span>:<span class="number">41.929000</span>Z&#x27;,</span><br><span class="line">     u&#x27;edited&#x27;: u&#x27;<span class="number">2014</span><span class="number">-12</span><span class="number">-20</span>T21:<span class="number">17</span>:<span class="number">50.403000</span>Z&#x27;,</span><br><span class="line">     u&#x27;eye_color&#x27;: u&#x27;yellow&#x27;,</span><br><span class="line">     u&#x27;films&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/films/4/&#x27;],</span></span><br><span class="line">     u&#x27;gender&#x27;: u&#x27;male&#x27;,</span><br><span class="line">     u&#x27;hair_color&#x27;: u&#x27;none&#x27;,</span><br><span class="line">     u&#x27;height&#x27;: u&#x27;<span class="number">175</span>&#x27;,</span><br><span class="line">     u&#x27;homeworld&#x27;: u&#x27;http:<span class="comment">//swapi.co/api/planets/36/&#x27;,</span></span><br><span class="line">     u&#x27;mass&#x27;: u&#x27;<span class="number">80</span>&#x27;,</span><br><span class="line">     u&#x27;name&#x27;: u&#x27;Darth Maul&#x27;,</span><br><span class="line">     u&#x27;skin_color&#x27;: u&#x27;red&#x27;,</span><br><span class="line">     u&#x27;species&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/species/22/&#x27;],</span></span><br><span class="line">     u&#x27;starships&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/starships/41/&#x27;],</span></span><br><span class="line">     u&#x27;url&#x27;: u&#x27;http:<span class="comment">//swapi.co/api/people/44/&#x27;,</span></span><br><span class="line">     u&#x27;vehicles&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/vehicles/42/&#x27;]&#125;,</span></span><br><span class="line">    u&#x27;_type&#x27;: u&#x27;people&#x27;&#125;],</span><br><span class="line">  u&#x27;max_score&#x27;: <span class="number">2.7754524</span>,</span><br><span class="line">  u&#x27;total&#x27;: <span class="number">2</span>&#125;,</span><br><span class="line"> u&#x27;timed_out&#x27;: False,</span><br><span class="line"> u&#x27;took&#x27;: <span class="number">44</span>&#125;</span><br></pre></td></tr></table></figure>
<p>view rawes_first8.py hosted with ❤ by GitHub<br>So, this query will give us results if the word is contained exactly in our indexed data. What if we want to build some kind of autocomplete input where we get the names that contain the characters we are typing?<br>There are many ways to do that and another great number of queries. Take a look here to learn more. I picked this one to get all documents with prefix “lu” in their name field:<br><code>es.search(index=&quot;sw&quot;, body=&#123;&quot;query&quot;: &#123;&quot;prefix&quot; : &#123; &quot;name&quot; : &quot;lu&quot; &#125;&#125;&#125;)</code><br>view rawes_first9.py hosted with ❤ by GitHub<br>We will get Luke Skywalker and Luminara Unduli, both with the same 1.0 score, since they match with the same 2 initial characters.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&#123;u&#x27;_shards&#x27;: &#123;u&#x27;failed&#x27;: <span class="number">0</span>, u&#x27;successful&#x27;: <span class="number">5</span>, u&#x27;total&#x27;: <span class="number">5</span>&#125;,</span><br><span class="line"> u&#x27;hits&#x27;: &#123;u&#x27;hits&#x27;: [&#123;u&#x27;_id&#x27;: u&#x27;<span class="number">1</span>&#x27;,</span><br><span class="line">    u&#x27;_index&#x27;: u&#x27;sw&#x27;,</span><br><span class="line">    u&#x27;_score&#x27;: <span class="number">1.0</span>,</span><br><span class="line">    u&#x27;_source&#x27;: &#123;u&#x27;birth_year&#x27;: u&#x27;<span class="number">19</span>BBY&#x27;,</span><br><span class="line">     u&#x27;created&#x27;: u&#x27;<span class="number">2014</span><span class="number">-12</span><span class="number">-09</span>T13:<span class="number">50</span>:<span class="number">51.644000</span>Z&#x27;,</span><br><span class="line">     u&#x27;edited&#x27;: u&#x27;<span class="number">2014</span><span class="number">-12</span><span class="number">-20</span>T21:<span class="number">17</span>:<span class="number">56.891000</span>Z&#x27;,</span><br><span class="line">     u&#x27;eye_color&#x27;: u&#x27;blue&#x27;,</span><br><span class="line">     u&#x27;films&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/films/1/&#x27;,</span></span><br><span class="line">      u&#x27;http:<span class="comment">//swapi.co/api/films/2/&#x27;,</span></span><br><span class="line">      u&#x27;http:<span class="comment">//swapi.co/api/films/3/&#x27;,</span></span><br><span class="line">      u&#x27;http:<span class="comment">//swapi.co/api/films/6/&#x27;],</span></span><br><span class="line">     u&#x27;gender&#x27;: u&#x27;male&#x27;,</span><br><span class="line">     u&#x27;hair_color&#x27;: u&#x27;blond&#x27;,</span><br><span class="line">     u&#x27;height&#x27;: u&#x27;<span class="number">172</span>&#x27;,</span><br><span class="line">     u&#x27;homeworld&#x27;: u&#x27;http:<span class="comment">//swapi.co/api/planets/1/&#x27;,</span></span><br><span class="line">     u&#x27;mass&#x27;: u&#x27;<span class="number">77</span>&#x27;,</span><br><span class="line">     u&#x27;name&#x27;: u&#x27;Luke Skywalker&#x27;,</span><br><span class="line">     u&#x27;skin_color&#x27;: u&#x27;fair&#x27;,</span><br><span class="line">     u&#x27;species&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/species/1/&#x27;],</span></span><br><span class="line">     u&#x27;starships&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/starships/12/&#x27;,</span></span><br><span class="line">      u&#x27;http:<span class="comment">//swapi.co/api/starships/22/&#x27;],</span></span><br><span class="line">     u&#x27;url&#x27;: u&#x27;http:<span class="comment">//swapi.co/api/people/1/&#x27;,</span></span><br><span class="line">     u&#x27;vehicles&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/vehicles/14/&#x27;,</span></span><br><span class="line">      u&#x27;http:<span class="comment">//swapi.co/api/vehicles/30/&#x27;]&#125;,</span></span><br><span class="line">    u&#x27;_type&#x27;: u&#x27;people&#x27;&#125;,</span><br><span class="line">   &#123;u&#x27;_id&#x27;: u&#x27;<span class="number">64</span>&#x27;,</span><br><span class="line">    u&#x27;_index&#x27;: u&#x27;sw&#x27;,</span><br><span class="line">    u&#x27;_score&#x27;: <span class="number">1.0</span>,</span><br><span class="line">    u&#x27;_source&#x27;: &#123;u&#x27;birth_year&#x27;: u&#x27;<span class="number">58</span>BBY&#x27;,</span><br><span class="line">     u&#x27;created&#x27;: u&#x27;<span class="number">2014</span><span class="number">-12</span><span class="number">-20</span>T16:<span class="number">45</span>:<span class="number">53.668000</span>Z&#x27;,</span><br><span class="line">     u&#x27;edited&#x27;: u&#x27;<span class="number">2014</span><span class="number">-12</span><span class="number">-20</span>T21:<span class="number">17</span>:<span class="number">50.455000</span>Z&#x27;,</span><br><span class="line">     u&#x27;eye_color&#x27;: u&#x27;blue&#x27;,</span><br><span class="line">     u&#x27;films&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/films/5/&#x27;,</span></span><br><span class="line">      u&#x27;http:<span class="comment">//swapi.co/api/films/6/&#x27;],</span></span><br><span class="line">     u&#x27;gender&#x27;: u&#x27;female&#x27;,</span><br><span class="line">     u&#x27;hair_color&#x27;: u&#x27;black&#x27;,</span><br><span class="line">     u&#x27;height&#x27;: u&#x27;<span class="number">170</span>&#x27;,</span><br><span class="line">     u&#x27;homeworld&#x27;: u&#x27;http:<span class="comment">//swapi.co/api/planets/51/&#x27;,</span></span><br><span class="line">     u&#x27;mass&#x27;: u&#x27;<span class="number">56.2</span>&#x27;,</span><br><span class="line">     u&#x27;name&#x27;: u&#x27;Luminara Unduli&#x27;,</span><br><span class="line">     u&#x27;skin_color&#x27;: u&#x27;yellow&#x27;,</span><br><span class="line">     u&#x27;species&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/species/29/&#x27;],</span></span><br><span class="line">     u&#x27;starships&#x27;: [],</span><br><span class="line">     u&#x27;url&#x27;: u&#x27;http:<span class="comment">//swapi.co/api/people/64/&#x27;,</span></span><br><span class="line">     u&#x27;vehicles&#x27;: []&#125;,</span><br><span class="line">    u&#x27;_type&#x27;: u&#x27;people&#x27;&#125;],</span><br><span class="line">  u&#x27;max_score&#x27;: <span class="number">1.0</span>,</span><br><span class="line">  u&#x27;total&#x27;: <span class="number">2</span>&#125;,</span><br><span class="line"> u&#x27;timed_out&#x27;: False,</span><br><span class="line"> u&#x27;took&#x27;: <span class="number">9</span>&#125;</span><br></pre></td></tr></table></figure>
<p>view rawes_first11.py hosted with ❤ by GitHub<br>There are many other interesting queries we can do. If, for example, we want to get all elements similar in some way, for a related or correction search we can use something like this:<br>es.search(index=”sw”, body={“query”:<br>{“fuzzy_like_this_field” : { “name” :<br>{“like_text”: “jaba”, “max_query_terms”:5}}}})<br>view rawes_first1.py hosted with ❤ by GitHub<br>And we got Jabba although we had a typo in our search query. That is powerful!</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;u&#x27;_shards&#x27;: &#123;u&#x27;failed&#x27;: <span class="number">0</span>, u&#x27;successful&#x27;: <span class="number">5</span>, u&#x27;total&#x27;: <span class="number">5</span>&#125;,</span><br><span class="line"> u&#x27;hits&#x27;: &#123;u&#x27;hits&#x27;: [&#123;u&#x27;_id&#x27;: u&#x27;<span class="number">16</span>&#x27;,</span><br><span class="line">    u&#x27;_index&#x27;: u&#x27;sw&#x27;,</span><br><span class="line">    u&#x27;_score&#x27;: <span class="number">1.5700331</span>,</span><br><span class="line">    u&#x27;_source&#x27;: &#123;u&#x27;birth_year&#x27;: u&#x27;<span class="number">600</span>BBY&#x27;,</span><br><span class="line">     u&#x27;created&#x27;: u&#x27;<span class="number">2014</span><span class="number">-12</span><span class="number">-10</span>T17:<span class="number">11</span>:<span class="number">31.638000</span>Z&#x27;,</span><br><span class="line">     u&#x27;edited&#x27;: u&#x27;<span class="number">2014</span><span class="number">-12</span><span class="number">-20</span>T21:<span class="number">17</span>:<span class="number">50.338000</span>Z&#x27;,</span><br><span class="line">     u&#x27;eye_color&#x27;: u&#x27;orange&#x27;,</span><br><span class="line">     u&#x27;films&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/films/1/&#x27;,</span></span><br><span class="line">      u&#x27;http:<span class="comment">//swapi.co/api/films/3/&#x27;,</span></span><br><span class="line">      u&#x27;http:<span class="comment">//swapi.co/api/films/4/&#x27;],</span></span><br><span class="line">     u&#x27;gender&#x27;: u&#x27;hermaphrodite&#x27;,</span><br><span class="line">     u&#x27;hair_color&#x27;: u&#x27;n/a&#x27;,</span><br><span class="line">     u&#x27;height&#x27;: u&#x27;<span class="number">175</span>&#x27;,</span><br><span class="line">     u&#x27;homeworld&#x27;: u&#x27;http:<span class="comment">//swapi.co/api/planets/24/&#x27;,</span></span><br><span class="line">     u&#x27;mass&#x27;: u&#x27;<span class="number">1</span>,<span class="number">358</span>&#x27;,</span><br><span class="line">     u&#x27;name&#x27;: u&#x27;Jabba Desilijic Tiure&#x27;,</span><br><span class="line">     u&#x27;skin_color&#x27;: u&#x27;green-tan, brown&#x27;,</span><br><span class="line">     u&#x27;species&#x27;: [u&#x27;http:<span class="comment">//swapi.co/api/species/5/&#x27;],</span></span><br><span class="line">     u&#x27;starships&#x27;: [],</span><br><span class="line">     u&#x27;url&#x27;: u&#x27;http:<span class="comment">//swapi.co/api/people/16/&#x27;,</span></span><br><span class="line">     u&#x27;vehicles&#x27;: []&#125;,</span><br><span class="line">    u&#x27;_type&#x27;: u&#x27;people&#x27;&#125;],</span><br><span class="line">  u&#x27;max_score&#x27;: <span class="number">1.5700331</span>,</span><br><span class="line">  u&#x27;total&#x27;: <span class="number">1</span>&#125;,</span><br><span class="line"> u&#x27;timed_out&#x27;: False,</span><br><span class="line"> u&#x27;took&#x27;: <span class="number">40</span>&#125;</span><br></pre></td></tr></table></figure>
<p>view rawes_first2.py hosted with ❤ by GitHub</p>
<h3 id="9-Next-Steps"><a href="#9-Next-Steps" class="headerlink" title="9. Next Steps"></a>9. Next Steps</h3><p>This was just a simple overview on how to set up your Elasticsearch server and start working with some data using Python. The code used here is publicly available in this IPython notebook.<br>We encourage you to learn more about ES and specially take a look at the Elastic stack where you will be able to see beautiful analytics and insights with Kibana and go through logs using Logstash.<br>In following posts we will talk about more advanced ES features and we will try to extend this simple test and use it to show a more interesting Django app powered by this data and by ES.<br>Hope this post was useful for developers trying to enter the ES world.<br>At Tryolabs we’re Elastic official partners. If you want to talk about Elasticsearch, ELK, applications and possible projects using these technologies, drop us a line to <a href="mailto:&#x68;&#101;&#108;&#108;&#x6f;&#64;&#x74;&#x72;&#x79;&#x6f;&#108;&#x61;&#98;&#x73;&#46;&#x63;&#111;&#x6d;">&#x68;&#101;&#108;&#108;&#x6f;&#64;&#x74;&#x72;&#x79;&#x6f;&#108;&#x61;&#98;&#x73;&#46;&#x63;&#111;&#x6d;</a> (or fill out this form) and we will be glad to connect!</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Python/" rel="tag"># Python</a>
              <a href="/tags/Elasticsearch/" rel="tag"># Elasticsearch</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2016/12/12/javascript%E4%B8%AD%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%92%8C%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87/" rel="prev" title="javascript中作用域和变量提升">
                  <i class="fa fa-chevron-left"></i> javascript中作用域和变量提升
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2016/12/13/%E7%94%A8matplotlib%E7%BB%98%E5%88%B6%E7%B2%BE%E7%BE%8E%E7%9A%84%E5%9B%BE%E8%A1%A8/" rel="next" title="用matplotlib绘制精美的图表">
                  用matplotlib绘制精美的图表 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lnmput@gmail.com</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
